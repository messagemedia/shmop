<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>shmop: MessageMedia\shmop\metrics\MetricsLogger Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">shmop
   </div>
   <div id="projectbrief">Shared memory manipulation library for PHP</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classMessageMedia_1_1shmop_1_1metrics_1_1MetricsLogger.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="classMessageMedia_1_1shmop_1_1metrics_1_1MetricsLogger-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">MessageMedia\shmop\metrics\MetricsLogger Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Provides a structure for implementing counter and timer style application level metrics within PHP, using shared memory for storage.  
 <a href="classMessageMedia_1_1shmop_1_1metrics_1_1MetricsLogger.html#details">More...</a></p>
<div class="dynheader">
Inheritance diagram for MessageMedia\shmop\metrics\MetricsLogger:</div>
<div class="dyncontent">
<div class="center"><img src="classMessageMedia_1_1shmop_1_1metrics_1_1MetricsLogger__inherit__graph.png" border="0" usemap="#MessageMedia_0Cshmop_0Cmetrics_0CMetricsLogger_inherit__map" alt="Inheritance graph"/></div>
<map name="MessageMedia_0Cshmop_0Cmetrics_0CMetricsLogger_inherit__map" id="MessageMedia_0Cshmop_0Cmetrics_0CMetricsLogger_inherit__map">
<area shape="rect" id="node2" href="classMessageMedia_1_1shmop_1_1SharedMemoryOp.html" title="Provides structure for reading and writing to shared memory segments using PHPs shmop_* functions..." alt="" coords="32,80,185,121"/>
</map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<div class="dynheader">
Collaboration diagram for MessageMedia\shmop\metrics\MetricsLogger:</div>
<div class="dyncontent">
<div class="center"><img src="classMessageMedia_1_1shmop_1_1metrics_1_1MetricsLogger__coll__graph.png" border="0" usemap="#MessageMedia_0Cshmop_0Cmetrics_0CMetricsLogger_coll__map" alt="Collaboration graph"/></div>
<map name="MessageMedia_0Cshmop_0Cmetrics_0CMetricsLogger_coll__map" id="MessageMedia_0Cshmop_0Cmetrics_0CMetricsLogger_coll__map">
<area shape="rect" id="node2" href="classMessageMedia_1_1shmop_1_1SharedMemoryOp.html" title="Provides structure for reading and writing to shared memory segments using PHPs shmop_* functions..." alt="" coords="32,80,185,121"/>
</map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:aa492947dfe6433cf6e0311fa72ddaa5f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMessageMedia_1_1shmop_1_1metrics_1_1MetricsLogger.html#aa492947dfe6433cf6e0311fa72ddaa5f">__construct</a> ($name, $metrics, $version, $mode=<a class="el" href="classMessageMedia_1_1shmop_1_1SharedMemoryOp.html#a989d02593b404404bf9d06c7fc4b9cbe">SharedMemoryOp::MODE_READ_WRITE</a>, $developmentMode=false)</td></tr>
<tr class="memdesc:aa492947dfe6433cf6e0311fa72ddaa5f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Construct a <a class="el" href="classMessageMedia_1_1shmop_1_1metrics_1_1MetricsLogger.html" title="Provides a structure for implementing counter and timer style application level metrics within PHP...">MetricsLogger</a> object.  <a href="#aa492947dfe6433cf6e0311fa72ddaa5f">More...</a><br /></td></tr>
<tr class="separator:aa492947dfe6433cf6e0311fa72ddaa5f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa4ee5a223f35c7d36093753f6aac1297"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMessageMedia_1_1shmop_1_1metrics_1_1MetricsLogger.html#aa4ee5a223f35c7d36093753f6aac1297">__get</a> ($name)</td></tr>
<tr class="memdesc:aa4ee5a223f35c7d36093753f6aac1297"><td class="mdescLeft">&#160;</td><td class="mdescRight">Override of the __get function.  <a href="#aa4ee5a223f35c7d36093753f6aac1297">More...</a><br /></td></tr>
<tr class="separator:aa4ee5a223f35c7d36093753f6aac1297"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a40a960f45e99dc8d28b5b85a74d43607"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMessageMedia_1_1shmop_1_1metrics_1_1MetricsLogger.html#a40a960f45e99dc8d28b5b85a74d43607">__set</a> ($name, $value)</td></tr>
<tr class="memdesc:a40a960f45e99dc8d28b5b85a74d43607"><td class="mdescLeft">&#160;</td><td class="mdescRight">Override of the __set function.  <a href="#a40a960f45e99dc8d28b5b85a74d43607">More...</a><br /></td></tr>
<tr class="separator:a40a960f45e99dc8d28b5b85a74d43607"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aac67636f698dc44d48ffd21121198383"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMessageMedia_1_1shmop_1_1metrics_1_1MetricsLogger.html#aac67636f698dc44d48ffd21121198383">increment</a> ($key, $value=1)</td></tr>
<tr class="memdesc:aac67636f698dc44d48ffd21121198383"><td class="mdescLeft">&#160;</td><td class="mdescRight">Increment a counter value in shared memory segment.  <a href="#aac67636f698dc44d48ffd21121198383">More...</a><br /></td></tr>
<tr class="separator:aac67636f698dc44d48ffd21121198383"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaee0bc6b4b3403234b2632ba7e0b3beb"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMessageMedia_1_1shmop_1_1metrics_1_1MetricsLogger.html#aaee0bc6b4b3403234b2632ba7e0b3beb">set</a> ($key, $value)</td></tr>
<tr class="memdesc:aaee0bc6b4b3403234b2632ba7e0b3beb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set a value for a key.  <a href="#aaee0bc6b4b3403234b2632ba7e0b3beb">More...</a><br /></td></tr>
<tr class="separator:aaee0bc6b4b3403234b2632ba7e0b3beb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a42efd1fbcac663ca12d1cc2f0f9121ae"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMessageMedia_1_1shmop_1_1metrics_1_1MetricsLogger.html#a42efd1fbcac663ca12d1cc2f0f9121ae">get</a> ($key)</td></tr>
<tr class="memdesc:a42efd1fbcac663ca12d1cc2f0f9121ae"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get a value for a key.  <a href="#a42efd1fbcac663ca12d1cc2f0f9121ae">More...</a><br /></td></tr>
<tr class="separator:a42efd1fbcac663ca12d1cc2f0f9121ae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa849f87eb95ec9a012a6828ed9a46878"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMessageMedia_1_1shmop_1_1metrics_1_1MetricsLogger.html#aa849f87eb95ec9a012a6828ed9a46878">timing</a> ($key, $timeTaken)</td></tr>
<tr class="memdesc:aa849f87eb95ec9a012a6828ed9a46878"><td class="mdescLeft">&#160;</td><td class="mdescRight">Capture timing details of an event for a key.  <a href="#aa849f87eb95ec9a012a6828ed9a46878">More...</a><br /></td></tr>
<tr class="separator:aa849f87eb95ec9a012a6828ed9a46878"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a35b29d232a618552aaf33d6936682901"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMessageMedia_1_1shmop_1_1metrics_1_1MetricsLogger.html#a35b29d232a618552aaf33d6936682901">getAllMetrics</a> ()</td></tr>
<tr class="memdesc:a35b29d232a618552aaf33d6936682901"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets all metrics.  <a href="#a35b29d232a618552aaf33d6936682901">More...</a><br /></td></tr>
<tr class="separator:a35b29d232a618552aaf33d6936682901"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab87bfc8aaa1d3cb955106214622038ae"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ab87bfc8aaa1d3cb955106214622038ae"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMessageMedia_1_1shmop_1_1metrics_1_1MetricsLogger.html#ab87bfc8aaa1d3cb955106214622038ae">clearAllMetrics</a> ()</td></tr>
<tr class="memdesc:ab87bfc8aaa1d3cb955106214622038ae"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the value of all metrics to 0. <br /></td></tr>
<tr class="separator:ab87bfc8aaa1d3cb955106214622038ae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad26bb7d5b5607282fe26936da07b1fce"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMessageMedia_1_1shmop_1_1metrics_1_1MetricsLogger.html#ad26bb7d5b5607282fe26936da07b1fce">getMetrics</a> ()</td></tr>
<tr class="memdesc:ad26bb7d5b5607282fe26936da07b1fce"><td class="mdescLeft">&#160;</td><td class="mdescRight">Getter for the metrics map.  <a href="#ad26bb7d5b5607282fe26936da07b1fce">More...</a><br /></td></tr>
<tr class="separator:ad26bb7d5b5607282fe26936da07b1fce"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classMessageMedia_1_1shmop_1_1SharedMemoryOp"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classMessageMedia_1_1shmop_1_1SharedMemoryOp')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classMessageMedia_1_1shmop_1_1SharedMemoryOp.html">MessageMedia\shmop\SharedMemoryOp</a></td></tr>
<tr class="memitem:a580004299ebcba7bba9b1da4a88abf28 inherit pub_methods_classMessageMedia_1_1shmop_1_1SharedMemoryOp"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMessageMedia_1_1shmop_1_1SharedMemoryOp.html#a580004299ebcba7bba9b1da4a88abf28">__construct</a> ($name, $identifier, $version, $mode=self::MODE_READ_WRITE)</td></tr>
<tr class="memdesc:a580004299ebcba7bba9b1da4a88abf28 inherit pub_methods_classMessageMedia_1_1shmop_1_1SharedMemoryOp"><td class="mdescLeft">&#160;</td><td class="mdescRight">Construct a <a class="el" href="classMessageMedia_1_1shmop_1_1SharedMemoryOp.html" title="Provides structure for reading and writing to shared memory segments using PHPs shmop_* functions...">SharedMemoryOp</a> object.  <a href="#a580004299ebcba7bba9b1da4a88abf28">More...</a><br /></td></tr>
<tr class="separator:a580004299ebcba7bba9b1da4a88abf28 inherit pub_methods_classMessageMedia_1_1shmop_1_1SharedMemoryOp"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a653182f25b35241f800eab714549faba inherit pub_methods_classMessageMedia_1_1shmop_1_1SharedMemoryOp"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a653182f25b35241f800eab714549faba"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMessageMedia_1_1shmop_1_1SharedMemoryOp.html#a653182f25b35241f800eab714549faba">__get</a> ($name)</td></tr>
<tr class="memdesc:a653182f25b35241f800eab714549faba inherit pub_methods_classMessageMedia_1_1shmop_1_1SharedMemoryOp"><td class="mdescLeft">&#160;</td><td class="mdescRight">Derived classes must implement a getter function. <br /></td></tr>
<tr class="separator:a653182f25b35241f800eab714549faba inherit pub_methods_classMessageMedia_1_1shmop_1_1SharedMemoryOp"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0ead8e4dac55dc17fccaa2b2e6f1761c inherit pub_methods_classMessageMedia_1_1shmop_1_1SharedMemoryOp"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a0ead8e4dac55dc17fccaa2b2e6f1761c"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMessageMedia_1_1shmop_1_1SharedMemoryOp.html#a0ead8e4dac55dc17fccaa2b2e6f1761c">__set</a> ($name, $value)</td></tr>
<tr class="memdesc:a0ead8e4dac55dc17fccaa2b2e6f1761c inherit pub_methods_classMessageMedia_1_1shmop_1_1SharedMemoryOp"><td class="mdescLeft">&#160;</td><td class="mdescRight">Derived classes must implement a setter function. <br /></td></tr>
<tr class="separator:a0ead8e4dac55dc17fccaa2b2e6f1761c inherit pub_methods_classMessageMedia_1_1shmop_1_1SharedMemoryOp"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ade0888a95912c34dc46ae3920175312f inherit pub_methods_classMessageMedia_1_1shmop_1_1SharedMemoryOp"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ade0888a95912c34dc46ae3920175312f"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMessageMedia_1_1shmop_1_1SharedMemoryOp.html#ade0888a95912c34dc46ae3920175312f">deleteSharedMemory</a> ($deleteKeyFile=true)</td></tr>
<tr class="memdesc:ade0888a95912c34dc46ae3920175312f inherit pub_methods_classMessageMedia_1_1shmop_1_1SharedMemoryOp"><td class="mdescLeft">&#160;</td><td class="mdescRight">Deletes the shared memory segements. <br /></td></tr>
<tr class="separator:ade0888a95912c34dc46ae3920175312f inherit pub_methods_classMessageMedia_1_1shmop_1_1SharedMemoryOp"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a23377d1e4cedd9c6847091c3778d9f28 inherit pub_methods_classMessageMedia_1_1shmop_1_1SharedMemoryOp"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMessageMedia_1_1shmop_1_1SharedMemoryOp.html#a23377d1e4cedd9c6847091c3778d9f28">isError</a> ()</td></tr>
<tr class="memdesc:a23377d1e4cedd9c6847091c3778d9f28 inherit pub_methods_classMessageMedia_1_1shmop_1_1SharedMemoryOp"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the value of hasError.  <a href="#a23377d1e4cedd9c6847091c3778d9f28">More...</a><br /></td></tr>
<tr class="separator:a23377d1e4cedd9c6847091c3778d9f28 inherit pub_methods_classMessageMedia_1_1shmop_1_1SharedMemoryOp"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acf854871dda21a6a950f85119eadc624 inherit pub_methods_classMessageMedia_1_1shmop_1_1SharedMemoryOp"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMessageMedia_1_1shmop_1_1SharedMemoryOp.html#acf854871dda21a6a950f85119eadc624">getName</a> ()</td></tr>
<tr class="memdesc:acf854871dda21a6a950f85119eadc624 inherit pub_methods_classMessageMedia_1_1shmop_1_1SharedMemoryOp"><td class="mdescLeft">&#160;</td><td class="mdescRight">Getter for the name property.  <a href="#acf854871dda21a6a950f85119eadc624">More...</a><br /></td></tr>
<tr class="separator:acf854871dda21a6a950f85119eadc624 inherit pub_methods_classMessageMedia_1_1shmop_1_1SharedMemoryOp"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9dd51da5107abd26d06ab15a4d915299 inherit pub_methods_classMessageMedia_1_1shmop_1_1SharedMemoryOp"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMessageMedia_1_1shmop_1_1SharedMemoryOp.html#a9dd51da5107abd26d06ab15a4d915299">getIdentifier</a> ()</td></tr>
<tr class="memdesc:a9dd51da5107abd26d06ab15a4d915299 inherit pub_methods_classMessageMedia_1_1shmop_1_1SharedMemoryOp"><td class="mdescLeft">&#160;</td><td class="mdescRight">Getter for the identifier property.  <a href="#a9dd51da5107abd26d06ab15a4d915299">More...</a><br /></td></tr>
<tr class="separator:a9dd51da5107abd26d06ab15a4d915299 inherit pub_methods_classMessageMedia_1_1shmop_1_1SharedMemoryOp"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aedd7d6cab3ed9c5007687fd419a48bd2 inherit pub_methods_classMessageMedia_1_1shmop_1_1SharedMemoryOp"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMessageMedia_1_1shmop_1_1SharedMemoryOp.html#aedd7d6cab3ed9c5007687fd419a48bd2">getIpcKeyFile</a> ()</td></tr>
<tr class="memdesc:aedd7d6cab3ed9c5007687fd419a48bd2 inherit pub_methods_classMessageMedia_1_1shmop_1_1SharedMemoryOp"><td class="mdescLeft">&#160;</td><td class="mdescRight">Getter for the ipcKeyFile property.  <a href="#aedd7d6cab3ed9c5007687fd419a48bd2">More...</a><br /></td></tr>
<tr class="separator:aedd7d6cab3ed9c5007687fd419a48bd2 inherit pub_methods_classMessageMedia_1_1shmop_1_1SharedMemoryOp"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:ac171f7d6afd02c72c5b5e469cb88a069"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ac171f7d6afd02c72c5b5e469cb88a069"></a>
const&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMessageMedia_1_1shmop_1_1metrics_1_1MetricsLogger.html#ac171f7d6afd02c72c5b5e469cb88a069">INSTANCE_DOMAIN_NULL</a> = -1</td></tr>
<tr class="memdesc:ac171f7d6afd02c72c5b5e469cb88a069"><td class="mdescLeft">&#160;</td><td class="mdescRight">Value to use as the pcp_instance when a metric has no instance domain. <br /></td></tr>
<tr class="separator:ac171f7d6afd02c72c5b5e469cb88a069"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abf0f5def795f90356e1124601c346ae1"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="abf0f5def795f90356e1124601c346ae1"></a>
const&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMessageMedia_1_1shmop_1_1metrics_1_1MetricsLogger.html#abf0f5def795f90356e1124601c346ae1">METRIC_TYPE_COUNTER</a> = 'counter'</td></tr>
<tr class="memdesc:abf0f5def795f90356e1124601c346ae1"><td class="mdescLeft">&#160;</td><td class="mdescRight">monotonic counter. <br /></td></tr>
<tr class="separator:abf0f5def795f90356e1124601c346ae1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1e8c5287326177701d84be8da84c19f1"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a1e8c5287326177701d84be8da84c19f1"></a>
const&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMessageMedia_1_1shmop_1_1metrics_1_1MetricsLogger.html#a1e8c5287326177701d84be8da84c19f1">METRIC_TYPE_TIMER</a> = 'timer'</td></tr>
<tr class="memdesc:a1e8c5287326177701d84be8da84c19f1"><td class="mdescLeft">&#160;</td><td class="mdescRight">interval timer. <br /></td></tr>
<tr class="separator:a1e8c5287326177701d84be8da84c19f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_attribs_classMessageMedia_1_1shmop_1_1SharedMemoryOp"><td colspan="2" onclick="javascript:toggleInherit('pub_attribs_classMessageMedia_1_1shmop_1_1SharedMemoryOp')"><img src="closed.png" alt="-"/>&#160;Public Attributes inherited from <a class="el" href="classMessageMedia_1_1shmop_1_1SharedMemoryOp.html">MessageMedia\shmop\SharedMemoryOp</a></td></tr>
<tr class="memitem:a4188ad5aa09d0779863074b191f0194f inherit pub_attribs_classMessageMedia_1_1shmop_1_1SharedMemoryOp"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a4188ad5aa09d0779863074b191f0194f"></a>
const&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMessageMedia_1_1shmop_1_1SharedMemoryOp.html#a4188ad5aa09d0779863074b191f0194f">MODE_READ_ONLY</a> = 'r'</td></tr>
<tr class="memdesc:a4188ad5aa09d0779863074b191f0194f inherit pub_attribs_classMessageMedia_1_1shmop_1_1SharedMemoryOp"><td class="mdescLeft">&#160;</td><td class="mdescRight">Open shared memory segments for reading only. <br /></td></tr>
<tr class="separator:a4188ad5aa09d0779863074b191f0194f inherit pub_attribs_classMessageMedia_1_1shmop_1_1SharedMemoryOp"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a989d02593b404404bf9d06c7fc4b9cbe inherit pub_attribs_classMessageMedia_1_1shmop_1_1SharedMemoryOp"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a989d02593b404404bf9d06c7fc4b9cbe"></a>
const&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMessageMedia_1_1shmop_1_1SharedMemoryOp.html#a989d02593b404404bf9d06c7fc4b9cbe">MODE_READ_WRITE</a> = 'w'</td></tr>
<tr class="memdesc:a989d02593b404404bf9d06c7fc4b9cbe inherit pub_attribs_classMessageMedia_1_1shmop_1_1SharedMemoryOp"><td class="mdescLeft">&#160;</td><td class="mdescRight">Open shared memory segments for reading and writing. <br /></td></tr>
<tr class="separator:a989d02593b404404bf9d06c7fc4b9cbe inherit pub_attribs_classMessageMedia_1_1shmop_1_1SharedMemoryOp"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ada4f2481df07a80e575531d9a168e316 inherit pub_attribs_classMessageMedia_1_1shmop_1_1SharedMemoryOp"><td class="memItemLeft" align="right" valign="top">const&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMessageMedia_1_1shmop_1_1SharedMemoryOp.html#ada4f2481df07a80e575531d9a168e316">IPC_KEY_FILE_PATH</a> = '/var/tmp/'</td></tr>
<tr class="separator:ada4f2481df07a80e575531d9a168e316 inherit pub_attribs_classMessageMedia_1_1shmop_1_1SharedMemoryOp"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5488145d3a852e5e17b5e902814cf6f2 inherit pub_attribs_classMessageMedia_1_1shmop_1_1SharedMemoryOp"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a5488145d3a852e5e17b5e902814cf6f2"></a>
const&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMessageMedia_1_1shmop_1_1SharedMemoryOp.html#a5488145d3a852e5e17b5e902814cf6f2">PAGE_SIZE</a> = 4096</td></tr>
<tr class="memdesc:a5488145d3a852e5e17b5e902814cf6f2 inherit pub_attribs_classMessageMedia_1_1shmop_1_1SharedMemoryOp"><td class="mdescLeft">&#160;</td><td class="mdescRight">Page size used on most MessageMedia production servers. <br /></td></tr>
<tr class="separator:a5488145d3a852e5e17b5e902814cf6f2 inherit pub_attribs_classMessageMedia_1_1shmop_1_1SharedMemoryOp"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a59d822532221ef70792a1fcd279d1679 inherit pub_attribs_classMessageMedia_1_1shmop_1_1SharedMemoryOp"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a59d822532221ef70792a1fcd279d1679"></a>
const&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMessageMedia_1_1shmop_1_1SharedMemoryOp.html#a59d822532221ef70792a1fcd279d1679">LOCK_WAIT_TIMEOUT</a> = 100</td></tr>
<tr class="memdesc:a59d822532221ef70792a1fcd279d1679 inherit pub_attribs_classMessageMedia_1_1shmop_1_1SharedMemoryOp"><td class="mdescLeft">&#160;</td><td class="mdescRight">Default maximum time, in milliseconds, to wait for a lock. <br /></td></tr>
<tr class="separator:a59d822532221ef70792a1fcd279d1679 inherit pub_attribs_classMessageMedia_1_1shmop_1_1SharedMemoryOp"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8ec45b2edf75f90dabeaead4d913ae95 inherit pub_attribs_classMessageMedia_1_1shmop_1_1SharedMemoryOp"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a8ec45b2edf75f90dabeaead4d913ae95"></a>
const&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMessageMedia_1_1shmop_1_1SharedMemoryOp.html#a8ec45b2edf75f90dabeaead4d913ae95">FTOK_PROJECT_INDEX_IDENTIFIER</a> = 'i'</td></tr>
<tr class="memdesc:a8ec45b2edf75f90dabeaead4d913ae95 inherit pub_attribs_classMessageMedia_1_1shmop_1_1SharedMemoryOp"><td class="mdescLeft">&#160;</td><td class="mdescRight">ftok project identifier for index segment. <br /></td></tr>
<tr class="separator:a8ec45b2edf75f90dabeaead4d913ae95 inherit pub_attribs_classMessageMedia_1_1shmop_1_1SharedMemoryOp"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac22d19f5b047cbd2bfe745163a1f3ac6 inherit pub_attribs_classMessageMedia_1_1shmop_1_1SharedMemoryOp"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ac22d19f5b047cbd2bfe745163a1f3ac6"></a>
const&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMessageMedia_1_1shmop_1_1SharedMemoryOp.html#ac22d19f5b047cbd2bfe745163a1f3ac6">FTOK_PROJECT_DATA_IDENTIFIER</a> = 'd'</td></tr>
<tr class="memdesc:ac22d19f5b047cbd2bfe745163a1f3ac6 inherit pub_attribs_classMessageMedia_1_1shmop_1_1SharedMemoryOp"><td class="mdescLeft">&#160;</td><td class="mdescRight">ftok project identifier for data segment. <br /></td></tr>
<tr class="separator:ac22d19f5b047cbd2bfe745163a1f3ac6 inherit pub_attribs_classMessageMedia_1_1shmop_1_1SharedMemoryOp"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a672c263b79ecf01cd3529c195ae8d25a inherit pub_attribs_classMessageMedia_1_1shmop_1_1SharedMemoryOp"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a672c263b79ecf01cd3529c195ae8d25a"></a>
const&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMessageMedia_1_1shmop_1_1SharedMemoryOp.html#a672c263b79ecf01cd3529c195ae8d25a">SHARED_MEMORY_MODE</a> = 0644</td></tr>
<tr class="memdesc:a672c263b79ecf01cd3529c195ae8d25a inherit pub_attribs_classMessageMedia_1_1shmop_1_1SharedMemoryOp"><td class="mdescLeft">&#160;</td><td class="mdescRight">Access mode to use when creating shared memory segments. <br /></td></tr>
<tr class="separator:a672c263b79ecf01cd3529c195ae8d25a inherit pub_attribs_classMessageMedia_1_1shmop_1_1SharedMemoryOp"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:ad904fba925f73aa2f277278016f5c77c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMessageMedia_1_1shmop_1_1metrics_1_1MetricsLogger.html#ad904fba925f73aa2f277278016f5c77c">parseMetrics</a> ($metrics)</td></tr>
<tr class="memdesc:ad904fba925f73aa2f277278016f5c77c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates a key to ID map of all metrics.  <a href="#ad904fba925f73aa2f277278016f5c77c">More...</a><br /></td></tr>
<tr class="separator:ad904fba925f73aa2f277278016f5c77c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a793d4d7925bffdc71fc70e137fe4ff78"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMessageMedia_1_1shmop_1_1metrics_1_1MetricsLogger.html#a793d4d7925bffdc71fc70e137fe4ff78">validateMetricConfig</a> ($index, $config, &amp;$pcpHashes)</td></tr>
<tr class="memdesc:a793d4d7925bffdc71fc70e137fe4ff78"><td class="mdescLeft">&#160;</td><td class="mdescRight">Validation configuration for metrics.  <a href="#a793d4d7925bffdc71fc70e137fe4ff78">More...</a><br /></td></tr>
<tr class="separator:a793d4d7925bffdc71fc70e137fe4ff78"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afeab7a3adee38501da25c54125d22d32"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMessageMedia_1_1shmop_1_1metrics_1_1MetricsLogger.html#afeab7a3adee38501da25c54125d22d32">findValueWithLock</a> ($name)</td></tr>
<tr class="memdesc:afeab7a3adee38501da25c54125d22d32"><td class="mdescLeft">&#160;</td><td class="mdescRight">Wraps <a class="el" href="classMessageMedia_1_1shmop_1_1metrics_1_1MetricsLogger.html#a097a75f521240b42a4ae01854ea964bd" title="Attempts to find a value in the index shared memory segment to get its offset in the data shared memo...">findValue()</a> function with shared locking.  <a href="#afeab7a3adee38501da25c54125d22d32">More...</a><br /></td></tr>
<tr class="separator:afeab7a3adee38501da25c54125d22d32"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a097a75f521240b42a4ae01854ea964bd"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMessageMedia_1_1shmop_1_1metrics_1_1MetricsLogger.html#a097a75f521240b42a4ae01854ea964bd">findValue</a> ($name)</td></tr>
<tr class="memdesc:a097a75f521240b42a4ae01854ea964bd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Attempts to find a value in the index shared memory segment to get its offset in the data shared memory segment.  <a href="#a097a75f521240b42a4ae01854ea964bd">More...</a><br /></td></tr>
<tr class="separator:a097a75f521240b42a4ae01854ea964bd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9255463de2e62dc893dc021020a8cdac"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMessageMedia_1_1shmop_1_1metrics_1_1MetricsLogger.html#a9255463de2e62dc893dc021020a8cdac">addNewValue</a> ($name)</td></tr>
<tr class="memdesc:a9255463de2e62dc893dc021020a8cdac"><td class="mdescLeft">&#160;</td><td class="mdescRight">Adds a new value to the shared memory segment.  <a href="#a9255463de2e62dc893dc021020a8cdac">More...</a><br /></td></tr>
<tr class="separator:a9255463de2e62dc893dc021020a8cdac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a329f9bd2d413f17449f487bbb838b061"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMessageMedia_1_1shmop_1_1metrics_1_1MetricsLogger.html#a329f9bd2d413f17449f487bbb838b061">validateValue</a> (&amp;$value, $name)</td></tr>
<tr class="memdesc:a329f9bd2d413f17449f487bbb838b061"><td class="mdescLeft">&#160;</td><td class="mdescRight">Validates a value against its type and modifies if necessary.  <a href="#a329f9bd2d413f17449f487bbb838b061">More...</a><br /></td></tr>
<tr class="separator:a329f9bd2d413f17449f487bbb838b061"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pro_methods_classMessageMedia_1_1shmop_1_1SharedMemoryOp"><td colspan="2" onclick="javascript:toggleInherit('pro_methods_classMessageMedia_1_1shmop_1_1SharedMemoryOp')"><img src="closed.png" alt="-"/>&#160;Protected Member Functions inherited from <a class="el" href="classMessageMedia_1_1shmop_1_1SharedMemoryOp.html">MessageMedia\shmop\SharedMemoryOp</a></td></tr>
<tr class="memitem:a3a1387fcad63b85e8851a168bcc3d0a5 inherit pro_methods_classMessageMedia_1_1shmop_1_1SharedMemoryOp"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMessageMedia_1_1shmop_1_1SharedMemoryOp.html#a3a1387fcad63b85e8851a168bcc3d0a5">initializeSharedMemorySegment</a> ()</td></tr>
<tr class="memdesc:a3a1387fcad63b85e8851a168bcc3d0a5 inherit pro_methods_classMessageMedia_1_1shmop_1_1SharedMemoryOp"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes a shared memory segment.  <a href="#a3a1387fcad63b85e8851a168bcc3d0a5">More...</a><br /></td></tr>
<tr class="separator:a3a1387fcad63b85e8851a168bcc3d0a5 inherit pro_methods_classMessageMedia_1_1shmop_1_1SharedMemoryOp"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a25a1a566f390a8885c689230343054f1 inherit pro_methods_classMessageMedia_1_1shmop_1_1SharedMemoryOp"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMessageMedia_1_1shmop_1_1SharedMemoryOp.html#a25a1a566f390a8885c689230343054f1">openOrCreate</a> ($projectIdentifier, $pages)</td></tr>
<tr class="memdesc:a25a1a566f390a8885c689230343054f1 inherit pro_methods_classMessageMedia_1_1shmop_1_1SharedMemoryOp"><td class="mdescLeft">&#160;</td><td class="mdescRight">Opens or creates a shared memory segment.  <a href="#a25a1a566f390a8885c689230343054f1">More...</a><br /></td></tr>
<tr class="separator:a25a1a566f390a8885c689230343054f1 inherit pro_methods_classMessageMedia_1_1shmop_1_1SharedMemoryOp"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a495801c80c6c22770b1cfba0345cc1b9 inherit pro_methods_classMessageMedia_1_1shmop_1_1SharedMemoryOp"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMessageMedia_1_1shmop_1_1SharedMemoryOp.html#a495801c80c6c22770b1cfba0345cc1b9">getHead</a> ()</td></tr>
<tr class="memdesc:a495801c80c6c22770b1cfba0345cc1b9 inherit pro_methods_classMessageMedia_1_1shmop_1_1SharedMemoryOp"><td class="mdescLeft">&#160;</td><td class="mdescRight">Helper function for getting the head data (version, nextIndexOffset, nextDataOffset) from the index shared memory segment.  <a href="#a495801c80c6c22770b1cfba0345cc1b9">More...</a><br /></td></tr>
<tr class="separator:a495801c80c6c22770b1cfba0345cc1b9 inherit pro_methods_classMessageMedia_1_1shmop_1_1SharedMemoryOp"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a99d4030b744dba40e4e857125a30ba6f inherit pro_methods_classMessageMedia_1_1shmop_1_1SharedMemoryOp"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a99d4030b744dba40e4e857125a30ba6f"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMessageMedia_1_1shmop_1_1SharedMemoryOp.html#a99d4030b744dba40e4e857125a30ba6f">getHeadStructure</a> ()</td></tr>
<tr class="memdesc:a99d4030b744dba40e4e857125a30ba6f inherit pro_methods_classMessageMedia_1_1shmop_1_1SharedMemoryOp"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the head structure of the index. <br /></td></tr>
<tr class="separator:a99d4030b744dba40e4e857125a30ba6f inherit pro_methods_classMessageMedia_1_1shmop_1_1SharedMemoryOp"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ada1bd3c706e07ad3cfb58d1177065017 inherit pro_methods_classMessageMedia_1_1shmop_1_1SharedMemoryOp"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMessageMedia_1_1shmop_1_1SharedMemoryOp.html#ada1bd3c706e07ad3cfb58d1177065017">getLock</a> (&amp;$fp, $lock, $timeout=self::LOCK_WAIT_TIMEOUT)</td></tr>
<tr class="memdesc:ada1bd3c706e07ad3cfb58d1177065017 inherit pro_methods_classMessageMedia_1_1shmop_1_1SharedMemoryOp"><td class="mdescLeft">&#160;</td><td class="mdescRight">Attempts to get a lock on the file handle $fp within the specified timeout, specified by $timeout.  <a href="#ada1bd3c706e07ad3cfb58d1177065017">More...</a><br /></td></tr>
<tr class="separator:ada1bd3c706e07ad3cfb58d1177065017 inherit pro_methods_classMessageMedia_1_1shmop_1_1SharedMemoryOp"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:a9ad2f979815bee215544cf739b5f80c1"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a9ad2f979815bee215544cf739b5f80c1"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMessageMedia_1_1shmop_1_1metrics_1_1MetricsLogger.html#a9ad2f979815bee215544cf739b5f80c1">$metrics</a> = array()</td></tr>
<tr class="memdesc:a9ad2f979815bee215544cf739b5f80c1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Array of metrics to be captured by this class. <br /></td></tr>
<tr class="separator:a9ad2f979815bee215544cf739b5f80c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9616581551a7ebea9a22e1d4aba293b8"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a9616581551a7ebea9a22e1d4aba293b8"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMessageMedia_1_1shmop_1_1metrics_1_1MetricsLogger.html#a9616581551a7ebea9a22e1d4aba293b8">$indexData</a> = array()</td></tr>
<tr class="memdesc:a9616581551a7ebea9a22e1d4aba293b8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Array of value names and with their offset and pack type. Can also include flags and length of each value. <br /></td></tr>
<tr class="separator:a9616581551a7ebea9a22e1d4aba293b8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0805d7e0e5b1241a3e98975f5fe0abe9"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a0805d7e0e5b1241a3e98975f5fe0abe9"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMessageMedia_1_1shmop_1_1metrics_1_1MetricsLogger.html#a0805d7e0e5b1241a3e98975f5fe0abe9">$developmentMode</a> = false</td></tr>
<tr class="memdesc:a0805d7e0e5b1241a3e98975f5fe0abe9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Flag to enable development mode, which turns on metric validation, and duplicate metric warnings. <br /></td></tr>
<tr class="separator:a0805d7e0e5b1241a3e98975f5fe0abe9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a05fbd0863299422a4f75f934e90c9665"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMessageMedia_1_1shmop_1_1metrics_1_1MetricsLogger.html#a05fbd0863299422a4f75f934e90c9665">$timingMetrics</a></td></tr>
<tr class="memdesc:a05fbd0863299422a4f75f934e90c9665"><td class="mdescLeft">&#160;</td><td class="mdescRight">Array or timing metrics to collect.  <a href="#a05fbd0863299422a4f75f934e90c9665">More...</a><br /></td></tr>
<tr class="separator:a05fbd0863299422a4f75f934e90c9665"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adcacfec014a42493ca02e5b834646998"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMessageMedia_1_1shmop_1_1metrics_1_1MetricsLogger.html#adcacfec014a42493ca02e5b834646998">$indexStructure</a></td></tr>
<tr class="separator:adcacfec014a42493ca02e5b834646998"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pro_attribs_classMessageMedia_1_1shmop_1_1SharedMemoryOp"><td colspan="2" onclick="javascript:toggleInherit('pro_attribs_classMessageMedia_1_1shmop_1_1SharedMemoryOp')"><img src="closed.png" alt="-"/>&#160;Protected Attributes inherited from <a class="el" href="classMessageMedia_1_1shmop_1_1SharedMemoryOp.html">MessageMedia\shmop\SharedMemoryOp</a></td></tr>
<tr class="memitem:a662bef2e443b622b49fdfe187744c914 inherit pro_attribs_classMessageMedia_1_1shmop_1_1SharedMemoryOp"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a662bef2e443b622b49fdfe187744c914"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMessageMedia_1_1shmop_1_1SharedMemoryOp.html#a662bef2e443b622b49fdfe187744c914">$version</a> = 1</td></tr>
<tr class="memdesc:a662bef2e443b622b49fdfe187744c914 inherit pro_attribs_classMessageMedia_1_1shmop_1_1SharedMemoryOp"><td class="mdescLeft">&#160;</td><td class="mdescRight">Version of the data structure being stored. <br /></td></tr>
<tr class="separator:a662bef2e443b622b49fdfe187744c914 inherit pro_attribs_classMessageMedia_1_1shmop_1_1SharedMemoryOp"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af46b1a831190aed3fb5fc372de55b56f inherit pro_attribs_classMessageMedia_1_1shmop_1_1SharedMemoryOp"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="af46b1a831190aed3fb5fc372de55b56f"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMessageMedia_1_1shmop_1_1SharedMemoryOp.html#af46b1a831190aed3fb5fc372de55b56f">$name</a> = ''</td></tr>
<tr class="memdesc:af46b1a831190aed3fb5fc372de55b56f inherit pro_attribs_classMessageMedia_1_1shmop_1_1SharedMemoryOp"><td class="mdescLeft">&#160;</td><td class="mdescRight">Name for the shared memory segment. <br /></td></tr>
<tr class="separator:af46b1a831190aed3fb5fc372de55b56f inherit pro_attribs_classMessageMedia_1_1shmop_1_1SharedMemoryOp"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9f8b4dfcf0544927d0ea941de4180ba9 inherit pro_attribs_classMessageMedia_1_1shmop_1_1SharedMemoryOp"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a9f8b4dfcf0544927d0ea941de4180ba9"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMessageMedia_1_1shmop_1_1SharedMemoryOp.html#a9f8b4dfcf0544927d0ea941de4180ba9">$identifier</a> = ''</td></tr>
<tr class="memdesc:a9f8b4dfcf0544927d0ea941de4180ba9 inherit pro_attribs_classMessageMedia_1_1shmop_1_1SharedMemoryOp"><td class="mdescLeft">&#160;</td><td class="mdescRight">A secondary identifier to be used with the $name. <br /></td></tr>
<tr class="separator:a9f8b4dfcf0544927d0ea941de4180ba9 inherit pro_attribs_classMessageMedia_1_1shmop_1_1SharedMemoryOp"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a848853ba8bd5c53dae6e9bb9cfc5f2ad inherit pro_attribs_classMessageMedia_1_1shmop_1_1SharedMemoryOp"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a848853ba8bd5c53dae6e9bb9cfc5f2ad"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMessageMedia_1_1shmop_1_1SharedMemoryOp.html#a848853ba8bd5c53dae6e9bb9cfc5f2ad">$shmIndexId</a> = false</td></tr>
<tr class="memdesc:a848853ba8bd5c53dae6e9bb9cfc5f2ad inherit pro_attribs_classMessageMedia_1_1shmop_1_1SharedMemoryOp"><td class="mdescLeft">&#160;</td><td class="mdescRight">Shared memory ID for the index returned by shmop_open(). <br /></td></tr>
<tr class="separator:a848853ba8bd5c53dae6e9bb9cfc5f2ad inherit pro_attribs_classMessageMedia_1_1shmop_1_1SharedMemoryOp"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0e14fd773dd07f90e851e5fa3ad19c27 inherit pro_attribs_classMessageMedia_1_1shmop_1_1SharedMemoryOp"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a0e14fd773dd07f90e851e5fa3ad19c27"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMessageMedia_1_1shmop_1_1SharedMemoryOp.html#a0e14fd773dd07f90e851e5fa3ad19c27">$shmDataId</a> = false</td></tr>
<tr class="memdesc:a0e14fd773dd07f90e851e5fa3ad19c27 inherit pro_attribs_classMessageMedia_1_1shmop_1_1SharedMemoryOp"><td class="mdescLeft">&#160;</td><td class="mdescRight">Shared memory ID for the data returned by shmop_open(). <br /></td></tr>
<tr class="separator:a0e14fd773dd07f90e851e5fa3ad19c27 inherit pro_attribs_classMessageMedia_1_1shmop_1_1SharedMemoryOp"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acda9178e320237d34d6304aa264427cd inherit pro_attribs_classMessageMedia_1_1shmop_1_1SharedMemoryOp"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="acda9178e320237d34d6304aa264427cd"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMessageMedia_1_1shmop_1_1SharedMemoryOp.html#acda9178e320237d34d6304aa264427cd">$shmIndexPages</a> = 1</td></tr>
<tr class="memdesc:acda9178e320237d34d6304aa264427cd inherit pro_attribs_classMessageMedia_1_1shmop_1_1SharedMemoryOp"><td class="mdescLeft">&#160;</td><td class="mdescRight">Number of pages to reserve for index shared memory segment on creation. <br /></td></tr>
<tr class="separator:acda9178e320237d34d6304aa264427cd inherit pro_attribs_classMessageMedia_1_1shmop_1_1SharedMemoryOp"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a59c005b8a4e0bc6dbb5ae236a66b7e3a inherit pro_attribs_classMessageMedia_1_1shmop_1_1SharedMemoryOp"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a59c005b8a4e0bc6dbb5ae236a66b7e3a"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMessageMedia_1_1shmop_1_1SharedMemoryOp.html#a59c005b8a4e0bc6dbb5ae236a66b7e3a">$shmDataPages</a> = 1</td></tr>
<tr class="memdesc:a59c005b8a4e0bc6dbb5ae236a66b7e3a inherit pro_attribs_classMessageMedia_1_1shmop_1_1SharedMemoryOp"><td class="mdescLeft">&#160;</td><td class="mdescRight">Number of pages to reserve for data shared memory segment on creation. <br /></td></tr>
<tr class="separator:a59c005b8a4e0bc6dbb5ae236a66b7e3a inherit pro_attribs_classMessageMedia_1_1shmop_1_1SharedMemoryOp"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a40f3d151f0cbdc48478240a40caf7ddc inherit pro_attribs_classMessageMedia_1_1shmop_1_1SharedMemoryOp"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a40f3d151f0cbdc48478240a40caf7ddc"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMessageMedia_1_1shmop_1_1SharedMemoryOp.html#a40f3d151f0cbdc48478240a40caf7ddc">$ipcKeyFile</a> = false</td></tr>
<tr class="memdesc:a40f3d151f0cbdc48478240a40caf7ddc inherit pro_attribs_classMessageMedia_1_1shmop_1_1SharedMemoryOp"><td class="mdescLeft">&#160;</td><td class="mdescRight">Path to file used when creating System V IPC Key. <br /></td></tr>
<tr class="separator:a40f3d151f0cbdc48478240a40caf7ddc inherit pro_attribs_classMessageMedia_1_1shmop_1_1SharedMemoryOp"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa0651379f6bbeb81af861887f942942e inherit pro_attribs_classMessageMedia_1_1shmop_1_1SharedMemoryOp"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aa0651379f6bbeb81af861887f942942e"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMessageMedia_1_1shmop_1_1SharedMemoryOp.html#aa0651379f6bbeb81af861887f942942e">$hasError</a> = false</td></tr>
<tr class="memdesc:aa0651379f6bbeb81af861887f942942e inherit pro_attribs_classMessageMedia_1_1shmop_1_1SharedMemoryOp"><td class="mdescLeft">&#160;</td><td class="mdescRight">Flag any permanent errors. <br /></td></tr>
<tr class="separator:aa0651379f6bbeb81af861887f942942e inherit pro_attribs_classMessageMedia_1_1shmop_1_1SharedMemoryOp"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9a114fa3971b7700246999c7c4152b9b inherit pro_attribs_classMessageMedia_1_1shmop_1_1SharedMemoryOp"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a9a114fa3971b7700246999c7c4152b9b"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMessageMedia_1_1shmop_1_1SharedMemoryOp.html#a9a114fa3971b7700246999c7c4152b9b">$readOnly</a> = false</td></tr>
<tr class="memdesc:a9a114fa3971b7700246999c7c4152b9b inherit pro_attribs_classMessageMedia_1_1shmop_1_1SharedMemoryOp"><td class="mdescLeft">&#160;</td><td class="mdescRight">Open shared memory segments as read only. <br /></td></tr>
<tr class="separator:a9a114fa3971b7700246999c7c4152b9b inherit pro_attribs_classMessageMedia_1_1shmop_1_1SharedMemoryOp"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8b9da8603edb684c107435d2eb4a3e9b inherit pro_attribs_classMessageMedia_1_1shmop_1_1SharedMemoryOp"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMessageMedia_1_1shmop_1_1SharedMemoryOp.html#a8b9da8603edb684c107435d2eb4a3e9b">$versionStructure</a></td></tr>
<tr class="separator:a8b9da8603edb684c107435d2eb4a3e9b inherit pro_attribs_classMessageMedia_1_1shmop_1_1SharedMemoryOp"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9f686dd9edce30ea188f69489a0a5764 inherit pro_attribs_classMessageMedia_1_1shmop_1_1SharedMemoryOp"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMessageMedia_1_1shmop_1_1SharedMemoryOp.html#a9f686dd9edce30ea188f69489a0a5764">$offsetsStructure</a></td></tr>
<tr class="separator:a9f686dd9edce30ea188f69489a0a5764 inherit pro_attribs_classMessageMedia_1_1shmop_1_1SharedMemoryOp"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Provides a structure for implementing counter and timer style application level metrics within PHP, using shared memory for storage. </p>
<p>This class serves two purposes.</p>
<p>Firstly is implements functionality required by the <a class="el" href="classMessageMedia_1_1shmop_1_1SharedMemoryOp.html" title="Provides structure for reading and writing to shared memory segments using PHPs shmop_* functions...">SharedMemoryOp</a> class of which it extends, including an index structure, a method for finding values in the index, a method for adding values to the index and __get and __set functions which use shmop_read and shmop_write. The index structure is designed to allow PMDAs written for PCP to map metrics to metrics defined within the PMDA. This is done by storing a cluster, item and instance value in the index, which are the three identifiers PCP uses to index metrics.</p>
<p>Secondly, it provides a structure for counting and timing metrics. Counter metrics are simple monotonic counts of something (requests, bytes, etc...), whilst timing metrics record how long something took (service_time), a histogram of timings recorded within specific ranges and a count of the number of timings have been recorded. When a counter metric is specificed, a single metric is created to capture this metric, when a timing metric is specified, eight metrics are created.</p>
<p>Derived classes need to provide a list of metrics to capture with meta data for each metric including:</p><ul>
<li>type: counter or timer</li>
<li>name: name for the metric</li>
<li>pcp_cluster: a cluster ID which matches the cluster ID given to the metric in the consuming PMDA</li>
<li>pcp_item: an item ID which matches the item ID given to the metric in the consuming PMDA (optional for timer metrics)</li>
<li>pcp_instance: an instance ID which matches the instance ID given to the metric in the consuming PMDA, if a metric doesn't belong to an instance use -1, provided by the constant INSTANCE_DOMAIN_NULL.</li>
</ul>
<p>Metrics are provided as an array of associative arrays and are validated upon construction - in development mode only - according to the following rules:</p><ul>
<li>Metrics must have a valid type, COUNTER or TIMER</li>
<li>Metrics must have a unique valid name</li>
<li>Metrics must have a valid pcp_cluster value between 0 and 65535</li>
<li>Metrics that aren't TIMERs must have a valid pcp_item value between 0 and 65535</li>
<li>TIMER metrics without a pcp_item or pcp_start_item value default to pcp_item 0</li>
<li>Metrics may have a pcp_instance value between -2147483648 and 2147483647, if no pcp_instance value is provided, -1 is used as a default.</li>
<li>The combination of a metrics pcp_cluster, pcp_item and pcp_instance values must be unique within a derived class. Metrics with duplicate values are ignored.</li>
</ul>
<p>Metric values are validated during assignment operations, and will be set to 0 if invalid values are detected. COUNTER and TIMER metric values must be:</p><ul>
<li>Positive integer values</li>
<li>Must not exceed the maximum value for a 32 bit integer value in PHP which is typically 2147483647 on a 32 bit OS and 4294967295 on a 64 bit OS.</li>
</ul>
<p>Example 1 - Defining and incrementing a counter called things. </p><div class="fragment"><div class="line"><a class="code" href="classMessageMedia_1_1shmop_1_1metrics_1_1MetricsLogger.html#a9ad2f979815bee215544cf739b5f80c1">$metrics</a> = array(</div><div class="line">    array(</div><div class="line">        <span class="stringliteral">&#39;type&#39;</span>         =&gt; <a class="code" href="classMessageMedia_1_1shmop_1_1metrics_1_1MetricsLogger.html#abf0f5def795f90356e1124601c346ae1">MetricsLogger::METRIC_TYPE_COUNTER</a>,</div><div class="line">        <span class="stringliteral">&#39;name&#39;</span>         =&gt; <span class="stringliteral">&#39;things&#39;</span>,</div><div class="line">        <span class="stringliteral">&#39;pcp_cluster&#39;</span>  =&gt; 0,</div><div class="line">        <span class="stringliteral">&#39;pcp_item&#39;</span>     =&gt; 0,</div><div class="line">        <span class="stringliteral">&#39;pcp_instance&#39;</span> =&gt; <a class="code" href="classMessageMedia_1_1shmop_1_1metrics_1_1MetricsLogger.html#ac171f7d6afd02c72c5b5e469cb88a069">MetricsLogger::INSTANCE_DOMAIN_NULL</a>,</div><div class="line">    )</div><div class="line">);</div><div class="line">$object = <span class="keyword">new</span> DerivedMetricsLogger(<a class="code" href="classMessageMedia_1_1shmop_1_1metrics_1_1MetricsLogger.html#a9ad2f979815bee215544cf739b5f80c1">$metrics</a>);</div><div class="line">echo $object-&gt;things; <span class="comment">// Prints 0</span></div><div class="line"></div><div class="line">$object-&gt;things = 10; <span class="comment">// Set the value of things to 10</span></div><div class="line">echo $object-&gt;things; <span class="comment">// Prints 10</span></div><div class="line"></div><div class="line">$object-&gt;things++;    <span class="comment">// Increment the value of things by 1</span></div><div class="line">echo $object-&gt;things; <span class="comment">// Prints 11</span></div></div><!-- fragment --><p>Example 2 - Defining and recording timings in a timer called time. </p><div class="fragment"><div class="line"><a class="code" href="classMessageMedia_1_1shmop_1_1metrics_1_1MetricsLogger.html#a9ad2f979815bee215544cf739b5f80c1">$metrics</a> = array(</div><div class="line">    array(</div><div class="line">        <span class="stringliteral">&#39;type&#39;</span>        =&gt; <a class="code" href="classMessageMedia_1_1shmop_1_1metrics_1_1MetricsLogger.html#a1e8c5287326177701d84be8da84c19f1">MetricsLogger::METRIC_TYPE_TIMER</a>,</div><div class="line">        <span class="stringliteral">&#39;name&#39;</span>        =&gt; <span class="stringliteral">&#39;time&#39;</span>,</div><div class="line">        <span class="stringliteral">&#39;pcp_cluster&#39;</span> =&gt; 0,</div><div class="line">        <span class="stringliteral">&#39;pcp_item&#39;</span>    =&gt; 0,</div><div class="line">        <span class="stringliteral">&#39;pcp_instance&#39;</span> =&gt; <a class="code" href="classMessageMedia_1_1shmop_1_1metrics_1_1MetricsLogger.html#ac171f7d6afd02c72c5b5e469cb88a069">MetricsLogger::INSTANCE_DOMAIN_NULL</a>,</div><div class="line">    )</div><div class="line">);</div><div class="line">$object = <span class="keyword">new</span> DerivedMetricsLogger(<a class="code" href="classMessageMedia_1_1shmop_1_1metrics_1_1MetricsLogger.html#a9ad2f979815bee215544cf739b5f80c1">$metrics</a>);</div><div class="line"><span class="comment">// On construction, 8 metrics have been created.</span></div><div class="line">echo $object-&gt;time.service_time; <span class="comment">// Prints 0</span></div><div class="line">echo $object-&gt;time.time_taken_0; <span class="comment">// Prints 0</span></div><div class="line">echo $object-&gt;time.time_taken_1; <span class="comment">// Prints 0</span></div><div class="line">echo $object-&gt;time.time_taken_2; <span class="comment">// Prints 0</span></div><div class="line">echo $object-&gt;time.time_taken_3; <span class="comment">// Prints 0</span></div><div class="line">echo $object-&gt;time.time_taken_4; <span class="comment">// Prints 0</span></div><div class="line">echo $object-&gt;time.time_taken_5; <span class="comment">// Prints 0</span></div><div class="line">echo $object-&gt;time.timings_count; <span class="comment">// Prints 0</span></div><div class="line"></div><div class="line">$object-&gt;timing(<span class="stringliteral">&#39;time&#39;</span>, 2000); <span class="comment">// Record that a &#39;time&#39; event took 2 seconds (2000 milliseconds)</span></div><div class="line">echo $object-&gt;time.service_time; <span class="comment">// Prints 2000, service time is an aggregate count of all timings recorded</span></div><div class="line">echo $object-&gt;time.time_taken_0; <span class="comment">// Prints 0</span></div><div class="line">echo $object-&gt;time.time_taken_1; <span class="comment">// Prints 1, 2 seconds falls into this histogram bin</span></div><div class="line">echo $object-&gt;time.time_taken_2; <span class="comment">// Prints 0</span></div><div class="line">echo $object-&gt;time.time_taken_3; <span class="comment">// Prints 0</span></div><div class="line">echo $object-&gt;time.time_taken_4; <span class="comment">// Prints 0</span></div><div class="line">echo $object-&gt;time.time_taken_5; <span class="comment">// Prints 0</span></div><div class="line">echo $object-&gt;time.timings_count; <span class="comment">// Prints 1</span></div><div class="line"></div><div class="line">$object-&gt;timing(<span class="stringliteral">&#39;time&#39;</span>, 15000); <span class="comment">// Record that a &#39;time&#39; event took 15 seconds (15000 milliseconds)</span></div><div class="line">echo $object-&gt;time.service_time; <span class="comment">// Prints 17000, service time is an aggregate count of all timings recorded</span></div><div class="line">echo $object-&gt;time.time_taken_0; <span class="comment">// Prints 0</span></div><div class="line">echo $object-&gt;time.time_taken_1; <span class="comment">// Prints 1</span></div><div class="line">echo $object-&gt;time.time_taken_2; <span class="comment">// Prints 0</span></div><div class="line">echo $object-&gt;time.time_taken_3; <span class="comment">// Prints 1, 15 seconds falls into this histogram bin</span></div><div class="line">echo $object-&gt;time.time_taken_4; <span class="comment">// Prints 0</span></div><div class="line">echo $object-&gt;time.time_taken_5; <span class="comment">// Prints 0</span></div><div class="line">echo $object-&gt;time.timings_count; <span class="comment">// Prints 2</span></div></div><!-- fragment --><p>Example 3 - Defining duplicate metrics. </p><div class="fragment"><div class="line"><a class="code" href="classMessageMedia_1_1shmop_1_1metrics_1_1MetricsLogger.html#a9ad2f979815bee215544cf739b5f80c1">$metrics</a> = array(</div><div class="line">    array(</div><div class="line">        <span class="stringliteral">&#39;type&#39;</span>         =&gt; <a class="code" href="classMessageMedia_1_1shmop_1_1metrics_1_1MetricsLogger.html#abf0f5def795f90356e1124601c346ae1">MetricsLogger::METRIC_TYPE_COUNTER</a>,</div><div class="line">        <span class="stringliteral">&#39;name&#39;</span>         =&gt; <span class="stringliteral">&#39;first&#39;</span>,</div><div class="line">        <span class="stringliteral">&#39;pcp_cluster&#39;</span>  =&gt; 0,</div><div class="line">        <span class="stringliteral">&#39;pcp_item&#39;</span>     =&gt; 0,</div><div class="line">        <span class="stringliteral">&#39;pcp_instance&#39;</span> =&gt; 0,</div><div class="line">    ),</div><div class="line">    array(</div><div class="line">        <span class="stringliteral">&#39;type&#39;</span>         =&gt; <a class="code" href="classMessageMedia_1_1shmop_1_1metrics_1_1MetricsLogger.html#abf0f5def795f90356e1124601c346ae1">MetricsLogger::METRIC_TYPE_COUNTER</a>,</div><div class="line">        <span class="stringliteral">&#39;name&#39;</span>         =&gt; <span class="stringliteral">&#39;second&#39;</span>,</div><div class="line">        <span class="stringliteral">&#39;pcp_cluster&#39;</span>  =&gt; 0,</div><div class="line">        <span class="stringliteral">&#39;pcp_item&#39;</span>     =&gt; 0,</div><div class="line">        <span class="stringliteral">&#39;pcp_instance&#39;</span> =&gt; 0,</div><div class="line">    ),</div><div class="line">);</div><div class="line">$object = <span class="keyword">new</span> DerivedMetricsLogger(<a class="code" href="classMessageMedia_1_1shmop_1_1metrics_1_1MetricsLogger.html#a9ad2f979815bee215544cf739b5f80c1">$metrics</a>);</div><div class="line">echo $object-&gt;first;  <span class="comment">// Prints 0</span></div><div class="line">echo $object-&gt;second; <span class="comment">// Prints nothing, value is false.</span></div></div><!-- fragment --><dl class="section see"><dt>See also</dt><dd>api/xml/SoapXmlMetricsLogger.class.php, an implementation of <a class="el" href="classMessageMedia_1_1shmop_1_1metrics_1_1MetricsLogger.html" title="Provides a structure for implementing counter and timer style application level metrics within PHP...">MetricsLogger</a>. </dd>
<dd>
<a href="http://oss.sgi.com/projects/pcp/">http://oss.sgi.com/projects/pcp/</a> </dd></dl>

<p>Definition at line <a class="el" href="MetricsLogger_8php_source.html#l00170">170</a> of file <a class="el" href="MetricsLogger_8php_source.html">MetricsLogger.php</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="aa492947dfe6433cf6e0311fa72ddaa5f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MessageMedia\shmop\metrics\MetricsLogger::__construct </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$metrics</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$version</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$mode</em> = <code><a class="el" href="classMessageMedia_1_1shmop_1_1SharedMemoryOp.html#a989d02593b404404bf9d06c7fc4b9cbe">SharedMemoryOp::MODE_READ_WRITE</a></code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$developmentMode</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Construct a <a class="el" href="classMessageMedia_1_1shmop_1_1metrics_1_1MetricsLogger.html" title="Provides a structure for implementing counter and timer style application level metrics within PHP...">MetricsLogger</a> object. </p>
<p>Attaches and initializes shared memory segment, creates array of metrics and keys and sets the version.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">$name</td><td>Name given to this object, typically an identifier for the metrics being collected, i.e. soapxml, email2sms, db. </td></tr>
    <tr><td class="paramname">$metrics</td><td>Array of metrics defined for this metrics logger, which correlate to the metrics defined in the PMDA reading the data. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a href="http://linux.die.net/man/3/pmda">http://linux.die.net/man/3/pmda</a>. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">$version</td><td>The version of the data structure being stored in $keyIds. </td></tr>
    <tr><td class="paramname">$mode</td><td>The mode in which this class should operate, read and write or read only. </td></tr>
    <tr><td class="paramname">$developmentMode</td><td>Flag to enable development mode. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="MetricsLogger_8php_source.html#l00226">226</a> of file <a class="el" href="MetricsLogger_8php_source.html">MetricsLogger.php</a>.</p>
<div class="fragment"><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;      {</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;        $this-&gt;developmentMode = <a class="code" href="classMessageMedia_1_1shmop_1_1metrics_1_1MetricsLogger.html#a0805d7e0e5b1241a3e98975f5fe0abe9">$developmentMode</a>;</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;        $this-&gt;metrics         = $this-&gt;<a class="code" href="classMessageMedia_1_1shmop_1_1metrics_1_1MetricsLogger.html#ad904fba925f73aa2f277278016f5c77c">parseMetrics</a>(<a class="code" href="classMessageMedia_1_1shmop_1_1metrics_1_1MetricsLogger.html#a9ad2f979815bee215544cf739b5f80c1">$metrics</a>);</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;        $metricsCount = count($this-&gt;metrics) * 4; <span class="comment">// Allowing for a 4-fold increase in amount of metrics.</span></div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;        $this-&gt;shmIndexPages = ceil((12 + ($metricsCount * 16)) / self::PAGE_SIZE); <span class="comment">// 12 bytes for head segment, and</span></div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;                                                                                    <span class="comment">// 16 bytes for each metric index.</span></div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;        $this-&gt;shmDataPages  = ceil(($metricsCount * 4) / self::PAGE_SIZE); <span class="comment">// 4 bytes for each metric.</span></div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;        parent::__construct(<a class="code" href="classMessageMedia_1_1shmop_1_1SharedMemoryOp.html#af46b1a831190aed3fb5fc372de55b56f">$name</a>, <span class="stringliteral">&#39;metrics&#39;</span>, <a class="code" href="classMessageMedia_1_1shmop_1_1SharedMemoryOp.html#a662bef2e443b622b49fdfe187744c914">$version</a>, $mode);</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;    }</div><div class="ttc" id="classMessageMedia_1_1shmop_1_1metrics_1_1MetricsLogger_html_a9ad2f979815bee215544cf739b5f80c1"><div class="ttname"><a href="classMessageMedia_1_1shmop_1_1metrics_1_1MetricsLogger.html#a9ad2f979815bee215544cf739b5f80c1">MessageMedia\shmop\metrics\MetricsLogger\$metrics</a></div><div class="ttdeci">$metrics</div><div class="ttdoc">Array of metrics to be captured by this class. </div><div class="ttdef"><b>Definition:</b> <a href="MetricsLogger_8php_source.html#l00179">MetricsLogger.php:179</a></div></div>
<div class="ttc" id="classMessageMedia_1_1shmop_1_1metrics_1_1MetricsLogger_html_a0805d7e0e5b1241a3e98975f5fe0abe9"><div class="ttname"><a href="classMessageMedia_1_1shmop_1_1metrics_1_1MetricsLogger.html#a0805d7e0e5b1241a3e98975f5fe0abe9">MessageMedia\shmop\metrics\MetricsLogger\$developmentMode</a></div><div class="ttdeci">$developmentMode</div><div class="ttdoc">Flag to enable development mode, which turns on metric validation, and duplicate metric warnings...</div><div class="ttdef"><b>Definition:</b> <a href="MetricsLogger_8php_source.html#l00185">MetricsLogger.php:185</a></div></div>
<div class="ttc" id="classMessageMedia_1_1shmop_1_1SharedMemoryOp_html_a662bef2e443b622b49fdfe187744c914"><div class="ttname"><a href="classMessageMedia_1_1shmop_1_1SharedMemoryOp.html#a662bef2e443b622b49fdfe187744c914">MessageMedia\shmop\SharedMemoryOp\$version</a></div><div class="ttdeci">$version</div><div class="ttdoc">Version of the data structure being stored. </div><div class="ttdef"><b>Definition:</b> <a href="SharedMemoryOp_8php_source.html#l00121">SharedMemoryOp.php:121</a></div></div>
<div class="ttc" id="classMessageMedia_1_1shmop_1_1metrics_1_1MetricsLogger_html_ad904fba925f73aa2f277278016f5c77c"><div class="ttname"><a href="classMessageMedia_1_1shmop_1_1metrics_1_1MetricsLogger.html#ad904fba925f73aa2f277278016f5c77c">MessageMedia\shmop\metrics\MetricsLogger\parseMetrics</a></div><div class="ttdeci">parseMetrics($metrics)</div><div class="ttdoc">Creates a key to ID map of all metrics. </div><div class="ttdef"><b>Definition:</b> <a href="MetricsLogger_8php_source.html#l00259">MetricsLogger.php:259</a></div></div>
<div class="ttc" id="classMessageMedia_1_1shmop_1_1SharedMemoryOp_html_af46b1a831190aed3fb5fc372de55b56f"><div class="ttname"><a href="classMessageMedia_1_1shmop_1_1SharedMemoryOp.html#af46b1a831190aed3fb5fc372de55b56f">MessageMedia\shmop\SharedMemoryOp\$name</a></div><div class="ttdeci">$name</div><div class="ttdoc">Name for the shared memory segment. </div><div class="ttdef"><b>Definition:</b> <a href="SharedMemoryOp_8php_source.html#l00122">SharedMemoryOp.php:122</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="aa4ee5a223f35c7d36093753f6aac1297"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MessageMedia\shmop\metrics\MetricsLogger::__get </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$name</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Override of the __get function. </p>
<p>Reads a value from the shared memory segment initialized by this class. When getting a value whose name doesn't exist in the keyIds array, false is returned. False is also returned if the shared memory segment cannot be accessed or read from.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">$name</td><td>Name of the value to return.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Value of that property if it's name exists in the classes $metrics array, false if it doens't exist or the shared memory segment cannot be accessed or read from. </dd></dl>

<p>Definition at line <a class="el" href="MetricsLogger_8php_source.html#l00609">609</a> of file <a class="el" href="MetricsLogger_8php_source.html">MetricsLogger.php</a>.</p>
<div class="fragment"><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;    {</div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;        <span class="keywordflow">if</span> ($this-&gt;hasError) {</div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;        }</div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;        <span class="keywordflow">if</span> ($this-&gt;shmIndexId === <span class="keyword">false</span> || $this-&gt;shmDataId === <span class="keyword">false</span>) {</div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;            <span class="keywordflow">if</span> (!$this-&gt;<a class="code" href="classMessageMedia_1_1shmop_1_1SharedMemoryOp.html#a3a1387fcad63b85e8851a168bcc3d0a5">initializeSharedMemorySegment</a>()) {</div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;                $this-&gt;hasError = <span class="keyword">true</span>;</div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;            }</div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;        }</div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;        <span class="keywordflow">if</span> ($this-&gt;hasError) {</div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;        }</div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;        <span class="keywordflow">if</span> ((!array_key_exists(<a class="code" href="classMessageMedia_1_1shmop_1_1SharedMemoryOp.html#af46b1a831190aed3fb5fc372de55b56f">$name</a>, $this-&gt;indexData)) &amp;&amp; (!$this-&gt;<a class="code" href="classMessageMedia_1_1shmop_1_1metrics_1_1MetricsLogger.html#afeab7a3adee38501da25c54125d22d32">findValueWithLock</a>(<a class="code" href="classMessageMedia_1_1shmop_1_1SharedMemoryOp.html#af46b1a831190aed3fb5fc372de55b56f">$name</a>))) {</div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;            <span class="comment">// If the value has explicitly defined as a metric, return 0</span></div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;            <span class="keywordflow">if</span> (array_key_exists(<a class="code" href="classMessageMedia_1_1shmop_1_1SharedMemoryOp.html#af46b1a831190aed3fb5fc372de55b56f">$name</a>, $this-&gt;metrics)) {</div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;                <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;            }</div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;        }</div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;        $data = unpack(</div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;            <span class="stringliteral">&quot;{$this-&gt;metrics[$name][&#39;type&#39;]}value&quot;</span>,</div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;            shmop_read(</div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;                $this-&gt;shmDataId,</div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;                $this-&gt;indexData[<a class="code" href="classMessageMedia_1_1shmop_1_1SharedMemoryOp.html#af46b1a831190aed3fb5fc372de55b56f">$name</a>][<span class="stringliteral">&#39;offset&#39;</span>],</div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;                <a class="code" href="classMessageMedia_1_1shmop_1_1Packing.html#ac7c99c2eda331bf98d13d1d7f62f087e">Packing::getTypeLength</a>($this-&gt;metrics[$name][<span class="stringliteral">&#39;type&#39;</span>])</div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;            )</div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;        );</div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;        <span class="keywordflow">return</span> $data[<span class="stringliteral">&#39;value&#39;</span>];</div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;    }</div><div class="ttc" id="classMessageMedia_1_1shmop_1_1Packing_html_ac7c99c2eda331bf98d13d1d7f62f087e"><div class="ttname"><a href="classMessageMedia_1_1shmop_1_1Packing.html#ac7c99c2eda331bf98d13d1d7f62f087e">MessageMedia\shmop\Packing\getTypeLength</a></div><div class="ttdeci">static getTypeLength($type)</div><div class="ttdoc">Gets the length of a value when packed into a binary string using the pack() function. </div><div class="ttdef"><b>Definition:</b> <a href="Packing_8php_source.html#l00055">Packing.php:55</a></div></div>
<div class="ttc" id="classMessageMedia_1_1shmop_1_1SharedMemoryOp_html_a3a1387fcad63b85e8851a168bcc3d0a5"><div class="ttname"><a href="classMessageMedia_1_1shmop_1_1SharedMemoryOp.html#a3a1387fcad63b85e8851a168bcc3d0a5">MessageMedia\shmop\SharedMemoryOp\initializeSharedMemorySegment</a></div><div class="ttdeci">initializeSharedMemorySegment()</div><div class="ttdoc">Initializes a shared memory segment. </div><div class="ttdef"><b>Definition:</b> <a href="SharedMemoryOp_8php_source.html#l00195">SharedMemoryOp.php:195</a></div></div>
<div class="ttc" id="classMessageMedia_1_1shmop_1_1SharedMemoryOp_html_af46b1a831190aed3fb5fc372de55b56f"><div class="ttname"><a href="classMessageMedia_1_1shmop_1_1SharedMemoryOp.html#af46b1a831190aed3fb5fc372de55b56f">MessageMedia\shmop\SharedMemoryOp\$name</a></div><div class="ttdeci">$name</div><div class="ttdoc">Name for the shared memory segment. </div><div class="ttdef"><b>Definition:</b> <a href="SharedMemoryOp_8php_source.html#l00122">SharedMemoryOp.php:122</a></div></div>
<div class="ttc" id="classMessageMedia_1_1shmop_1_1metrics_1_1MetricsLogger_html_afeab7a3adee38501da25c54125d22d32"><div class="ttname"><a href="classMessageMedia_1_1shmop_1_1metrics_1_1MetricsLogger.html#afeab7a3adee38501da25c54125d22d32">MessageMedia\shmop\metrics\MetricsLogger\findValueWithLock</a></div><div class="ttdeci">findValueWithLock($name)</div><div class="ttdoc">Wraps findValue() function with shared locking. </div><div class="ttdef"><b>Definition:</b> <a href="MetricsLogger_8php_source.html#l00387">MetricsLogger.php:387</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a40a960f45e99dc8d28b5b85a74d43607"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MessageMedia\shmop\metrics\MetricsLogger::__set </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Override of the __set function. </p>
<p>Sets a value in the shared memory segment initialized by this class. Values are only set in shared memory if the name of the value exists in the classes metrics array.</p>
<p>If the $value exceeds the maximum value for a integer it will be wrapped around to 0 to avoid PHP converting it to a double.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">$name</td><td>Name of the value to set. </td></tr>
    <tr><td class="paramname">$value</td><td>The value to set. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="MetricsLogger_8php_source.html#l00653">653</a> of file <a class="el" href="MetricsLogger_8php_source.html">MetricsLogger.php</a>.</p>
<div class="fragment"><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;    {</div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;        <span class="keywordflow">if</span> ($this-&gt;readOnly) {</div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;            $this-&gt;logger-&gt;error(<span class="stringliteral">&#39;Attempted to write in read only mode&#39;</span>);</div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;        }</div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;        <span class="keywordflow">if</span> ($this-&gt;hasError) {</div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;        }</div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;        <span class="keywordflow">if</span> ($this-&gt;shmIndexId === <span class="keyword">false</span> || $this-&gt;shmDataId === <span class="keyword">false</span>) {</div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;            <span class="keywordflow">if</span> (!$this-&gt;<a class="code" href="classMessageMedia_1_1shmop_1_1SharedMemoryOp.html#a3a1387fcad63b85e8851a168bcc3d0a5">initializeSharedMemorySegment</a>()) {</div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;                $this-&gt;hasError = <span class="keyword">true</span>;</div><div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;            }</div><div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;        }</div><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;        <span class="keywordflow">if</span> ($this-&gt;hasError) {</div><div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;        }</div><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;        <span class="keywordflow">if</span> ((!array_key_exists(<a class="code" href="classMessageMedia_1_1shmop_1_1SharedMemoryOp.html#af46b1a831190aed3fb5fc372de55b56f">$name</a>, $this-&gt;indexData)) &amp;&amp; (!$this-&gt;<a class="code" href="classMessageMedia_1_1shmop_1_1metrics_1_1MetricsLogger.html#afeab7a3adee38501da25c54125d22d32">findValueWithLock</a>(<a class="code" href="classMessageMedia_1_1shmop_1_1SharedMemoryOp.html#af46b1a831190aed3fb5fc372de55b56f">$name</a>))) {</div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;            <span class="keywordflow">if</span> (!$this-&gt;<a class="code" href="classMessageMedia_1_1shmop_1_1metrics_1_1MetricsLogger.html#a9255463de2e62dc893dc021020a8cdac">addNewValue</a>(<a class="code" href="classMessageMedia_1_1shmop_1_1SharedMemoryOp.html#af46b1a831190aed3fb5fc372de55b56f">$name</a>)) {</div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;                $this-&gt;hasError = <span class="keyword">true</span>;</div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;                <span class="keywordflow">return</span>;</div><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;            }</div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;        }</div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;        $this-&gt;<a class="code" href="classMessageMedia_1_1shmop_1_1metrics_1_1MetricsLogger.html#a329f9bd2d413f17449f487bbb838b061">validateValue</a>($value, <a class="code" href="classMessageMedia_1_1shmop_1_1SharedMemoryOp.html#af46b1a831190aed3fb5fc372de55b56f">$name</a>);</div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;        shmop_write($this-&gt;shmDataId, pack($this-&gt;metrics[<a class="code" href="classMessageMedia_1_1shmop_1_1SharedMemoryOp.html#af46b1a831190aed3fb5fc372de55b56f">$name</a>][<span class="stringliteral">&#39;type&#39;</span>], $value), $this-&gt;indexData[$name][<span class="stringliteral">&#39;offset&#39;</span>]);</div><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;    }</div><div class="ttc" id="classMessageMedia_1_1shmop_1_1metrics_1_1MetricsLogger_html_a329f9bd2d413f17449f487bbb838b061"><div class="ttname"><a href="classMessageMedia_1_1shmop_1_1metrics_1_1MetricsLogger.html#a329f9bd2d413f17449f487bbb838b061">MessageMedia\shmop\metrics\MetricsLogger\validateValue</a></div><div class="ttdeci">validateValue(&amp;$value, $name)</div><div class="ttdoc">Validates a value against its type and modifies if necessary. </div><div class="ttdef"><b>Definition:</b> <a href="MetricsLogger_8php_source.html#l00574">MetricsLogger.php:574</a></div></div>
<div class="ttc" id="classMessageMedia_1_1shmop_1_1SharedMemoryOp_html_a3a1387fcad63b85e8851a168bcc3d0a5"><div class="ttname"><a href="classMessageMedia_1_1shmop_1_1SharedMemoryOp.html#a3a1387fcad63b85e8851a168bcc3d0a5">MessageMedia\shmop\SharedMemoryOp\initializeSharedMemorySegment</a></div><div class="ttdeci">initializeSharedMemorySegment()</div><div class="ttdoc">Initializes a shared memory segment. </div><div class="ttdef"><b>Definition:</b> <a href="SharedMemoryOp_8php_source.html#l00195">SharedMemoryOp.php:195</a></div></div>
<div class="ttc" id="classMessageMedia_1_1shmop_1_1metrics_1_1MetricsLogger_html_a9255463de2e62dc893dc021020a8cdac"><div class="ttname"><a href="classMessageMedia_1_1shmop_1_1metrics_1_1MetricsLogger.html#a9255463de2e62dc893dc021020a8cdac">MessageMedia\shmop\metrics\MetricsLogger\addNewValue</a></div><div class="ttdeci">addNewValue($name)</div><div class="ttdoc">Adds a new value to the shared memory segment. </div><div class="ttdef"><b>Definition:</b> <a href="MetricsLogger_8php_source.html#l00462">MetricsLogger.php:462</a></div></div>
<div class="ttc" id="classMessageMedia_1_1shmop_1_1SharedMemoryOp_html_af46b1a831190aed3fb5fc372de55b56f"><div class="ttname"><a href="classMessageMedia_1_1shmop_1_1SharedMemoryOp.html#af46b1a831190aed3fb5fc372de55b56f">MessageMedia\shmop\SharedMemoryOp\$name</a></div><div class="ttdeci">$name</div><div class="ttdoc">Name for the shared memory segment. </div><div class="ttdef"><b>Definition:</b> <a href="SharedMemoryOp_8php_source.html#l00122">SharedMemoryOp.php:122</a></div></div>
<div class="ttc" id="classMessageMedia_1_1shmop_1_1metrics_1_1MetricsLogger_html_afeab7a3adee38501da25c54125d22d32"><div class="ttname"><a href="classMessageMedia_1_1shmop_1_1metrics_1_1MetricsLogger.html#afeab7a3adee38501da25c54125d22d32">MessageMedia\shmop\metrics\MetricsLogger\findValueWithLock</a></div><div class="ttdeci">findValueWithLock($name)</div><div class="ttdoc">Wraps findValue() function with shared locking. </div><div class="ttdef"><b>Definition:</b> <a href="MetricsLogger_8php_source.html#l00387">MetricsLogger.php:387</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a9255463de2e62dc893dc021020a8cdac"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">MessageMedia\shmop\metrics\MetricsLogger::addNewValue </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$name</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Adds a new value to the shared memory segment. </p>
<p>Adds a value to the shared memory segment index and this classes internal index.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">$name</td><td>Name of the value to add.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True if added, false otherwise. </dd></dl>
<p>Zero the destination data.</p>
<p>&lt; Order of parameters must match order in $this-&gt;indexStrucutre</p>
<p>&lt;</p><dl class="todo"><dt><b><a class="el" href="todo.html#_todo000001">Todo:</a></b></dt><dd>Find a way to pass these in the same order as $this-&gt;indexStrucutre </dd></dl>

<p>Definition at line <a class="el" href="MetricsLogger_8php_source.html#l00462">462</a> of file <a class="el" href="MetricsLogger_8php_source.html">MetricsLogger.php</a>.</p>
<div class="fragment"><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;    {</div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;        <span class="keywordflow">if</span> (!isset($this-&gt;metrics[<a class="code" href="classMessageMedia_1_1shmop_1_1SharedMemoryOp.html#af46b1a831190aed3fb5fc372de55b56f">$name</a>])) {</div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;            $this-&gt;logger-&gt;warning(<span class="stringliteral">&#39;Attempted to add undefined metric &#39;</span> . $name);</div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;        }</div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;</div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;        $fp = fopen($this-&gt;ipcKeyFile, <span class="charliteral">&#39;r&#39;</span>);</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;        <span class="keywordflow">if</span> ($fp !== <span class="keyword">false</span>) {</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;            <span class="keywordflow">try</span> {</div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;                <span class="keywordflow">if</span> ($this-&gt;<a class="code" href="classMessageMedia_1_1shmop_1_1SharedMemoryOp.html#ada1bd3c706e07ad3cfb58d1177065017">getLock</a>($fp, LOCK_EX)) {</div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;                    <span class="keywordflow">if</span> ($this-&gt;<a class="code" href="classMessageMedia_1_1shmop_1_1metrics_1_1MetricsLogger.html#a097a75f521240b42a4ae01854ea964bd">findValue</a>($name)) {</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;                        <span class="comment">// The value may have been added between the last check</span></div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;                        <span class="comment">// and locking of the file.</span></div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;                        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;                    }</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;                    $head = $this-&gt;<a class="code" href="classMessageMedia_1_1shmop_1_1SharedMemoryOp.html#a495801c80c6c22770b1cfba0345cc1b9">getHead</a>();</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;                    $indexStructureLength = <a class="code" href="classMessageMedia_1_1shmop_1_1Packing.html#aa11ea1d5fd1a95de3f1b330bc63a46c9">Packing::getPackLength</a>($this-&gt;indexStructure);</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;                    <span class="keywordflow">if</span> (shmop_size($this-&gt;shmIndexId) &lt; $head[<span class="stringliteral">&#39;nextIndexOffset&#39;</span>] + $indexStructureLength) {</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;                        $this-&gt;logger-&gt;error(<span class="stringliteral">&#39;Index shared memory segment full, cannot add &#39;</span> . $name);</div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;                        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;                    }</div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;</div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;                    $newValueLength = <a class="code" href="classMessageMedia_1_1shmop_1_1Packing.html#ac7c99c2eda331bf98d13d1d7f62f087e">Packing::getTypeLength</a>($this-&gt;metrics[$name][<span class="stringliteral">&#39;type&#39;</span>]);</div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;                    <span class="keywordflow">if</span> (shmop_size($this-&gt;shmDataId) &lt; $head[<span class="stringliteral">&#39;nextDataOffset&#39;</span>] + $newValueLength) {</div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;                        $this-&gt;logger-&gt;error(<span class="stringliteral">&#39;Data shared memory segment full, cannot add &#39;</span> . $name);</div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;                        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;                    }</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;<span class="comment">                    /// Zero the destination data.</span></div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;<span class="comment"></span>                    shmop_write($this-&gt;shmDataId, pack(<span class="stringliteral">&quot;x{$newValueLength}&quot;</span>), $head[<span class="stringliteral">&#39;nextDataOffset&#39;</span>]);</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;</div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;                    $cluster  = $this-&gt;metrics[<a class="code" href="classMessageMedia_1_1shmop_1_1SharedMemoryOp.html#af46b1a831190aed3fb5fc372de55b56f">$name</a>][<span class="stringliteral">&#39;pcp_cluster&#39;</span>];</div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;                    $item     = $this-&gt;metrics[<a class="code" href="classMessageMedia_1_1shmop_1_1SharedMemoryOp.html#af46b1a831190aed3fb5fc372de55b56f">$name</a>][<span class="stringliteral">&#39;pcp_item&#39;</span>];</div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;                    $instance = $this-&gt;metrics[<a class="code" href="classMessageMedia_1_1shmop_1_1SharedMemoryOp.html#af46b1a831190aed3fb5fc372de55b56f">$name</a>][<span class="stringliteral">&#39;pcp_instance&#39;</span>];</div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;                    $type     = $this-&gt;metrics[<a class="code" href="classMessageMedia_1_1shmop_1_1SharedMemoryOp.html#af46b1a831190aed3fb5fc372de55b56f">$name</a>][<span class="stringliteral">&#39;type&#39;</span>];</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;                    $flags = 0; <span class="comment">// Currently unused</span></div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;</div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;                    <span class="comment">// Write the new item into the index.</span></div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;                    $data = pack(</div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;                        <a class="code" href="classMessageMedia_1_1shmop_1_1Packing.html#aab0e87eae6338b78df993269046a5f70">Packing::getPackFormat</a>(<span class="stringliteral">&#39;index&#39;</span>, $this-&gt;indexStructure),</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;                        $flags,     <span class="comment">///&lt; Order of parameters must match order in $this-&gt;indexStrucutre</span></div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;<span class="comment"></span>                        ord($type), <span class="comment">///&lt; @todo Find a way to pass these in the same order as $this-&gt;indexStrucutre</span></div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;<span class="comment"></span>                        $newValueLength,</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;                        $head[<span class="stringliteral">&#39;nextDataOffset&#39;</span>],</div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;                        $cluster,</div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;                        $item,</div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;                        $instance</div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;                    );</div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;                    <span class="keywordflow">if</span> (strlen($data) != $indexStructureLength) {</div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;                        $this-&gt;logger-&gt;error(</div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;                            <span class="stringliteral">&#39;Incorrect index length &#39;</span> . strlen($data) . <span class="stringliteral">&#39;, length should be &#39;</span> . $indexStructureLength</div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;                        );</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;                        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;                    }</div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;                    $bytesWritten = shmop_write($this-&gt;shmIndexId, $data, $head[<span class="stringliteral">&#39;nextIndexOffset&#39;</span>]);</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;                    <span class="keywordflow">if</span> ($bytesWritten != $indexStructureLength) {</div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;                        $this-&gt;logger-&gt;error(</div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;                            <span class="stringliteral">&#39;Incorrect index bytes written &#39;</span> . $bytesWritten . <span class="stringliteral">&#39;, bytes written should be &#39;</span> .</div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;                            $indexStructureLength</div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;                        );</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;                        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;                    }</div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;</div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;                    <span class="comment">// Store data about this value locally.</span></div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;                    $this-&gt;indexData[<a class="code" href="classMessageMedia_1_1shmop_1_1SharedMemoryOp.html#af46b1a831190aed3fb5fc372de55b56f">$name</a>][<span class="stringliteral">&#39;offset&#39;</span>] = $head[<span class="stringliteral">&#39;nextDataOffset&#39;</span>];</div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;                    $this-&gt;indexData[<a class="code" href="classMessageMedia_1_1shmop_1_1SharedMemoryOp.html#af46b1a831190aed3fb5fc372de55b56f">$name</a>][<span class="stringliteral">&#39;length&#39;</span>] = $newValueLength;</div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;                    $this-&gt;indexData[<a class="code" href="classMessageMedia_1_1shmop_1_1SharedMemoryOp.html#af46b1a831190aed3fb5fc372de55b56f">$name</a>][<span class="stringliteral">&#39;type&#39;</span>]   = $type;</div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;</div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;                    <span class="comment">// Write the new offsets to the index segment.</span></div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;                    $head[<span class="stringliteral">&#39;nextIndexOffset&#39;</span>] += $bytesWritten;</div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;                    $head[<span class="stringliteral">&#39;nextDataOffset&#39;</span>] += $newValueLength;</div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;                    $packedOffsetData = pack(</div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;                        <a class="code" href="classMessageMedia_1_1shmop_1_1Packing.html#aab0e87eae6338b78df993269046a5f70">Packing::getPackFormat</a>(<span class="stringliteral">&#39;offset&#39;</span>, $this-&gt;offsetsStructure),</div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;                        $head[<span class="stringliteral">&#39;nextIndexOffset&#39;</span>],</div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;                        $head[<span class="stringliteral">&#39;nextDataOffset&#39;</span>]</div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;                    );</div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;                    $packedOffsetDataBytesWritten = shmop_write(</div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;                        $this-&gt;shmIndexId,</div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;                        $packedOffsetData,</div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;                        <a class="code" href="classMessageMedia_1_1shmop_1_1Packing.html#aa11ea1d5fd1a95de3f1b330bc63a46c9">Packing::getPackLength</a>($this-&gt;versionStructure)</div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;                    );</div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;                    <span class="keywordflow">if</span> ($packedOffsetDataBytesWritten == <a class="code" href="classMessageMedia_1_1shmop_1_1Packing.html#aa11ea1d5fd1a95de3f1b330bc63a46c9">Packing::getPackLength</a>($this-&gt;offsetsStructure)) {</div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;                        flock($fp, LOCK_UN);</div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;                        fclose($fp);</div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;                        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;                    }</div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;                } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;                    $this-&gt;logger-&gt;error(<span class="stringliteral">&#39;Failed to obtain a lock on &#39;</span> . $this-&gt;ipcKeyFile);</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;                }</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;            } <span class="keywordflow">catch</span> (Exception $e) {</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;                <span class="comment">// Let any exceptions fall through, unlock and close the file</span></div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;                $this-&gt;logger-&gt;error($e-&gt;getMessage());</div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;            }</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;            flock($fp, LOCK_UN);</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;            fclose($fp);</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;            $this-&gt;logger-&gt;error(<span class="stringliteral">&#39;Failed to open &#39;</span> . $this-&gt;ipcKeyFile);</div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;        }</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;    }</div><div class="ttc" id="classMessageMedia_1_1shmop_1_1SharedMemoryOp_html_a495801c80c6c22770b1cfba0345cc1b9"><div class="ttname"><a href="classMessageMedia_1_1shmop_1_1SharedMemoryOp.html#a495801c80c6c22770b1cfba0345cc1b9">MessageMedia\shmop\SharedMemoryOp\getHead</a></div><div class="ttdeci">getHead()</div><div class="ttdoc">Helper function for getting the head data (version, nextIndexOffset, nextDataOffset) from the index s...</div><div class="ttdef"><b>Definition:</b> <a href="SharedMemoryOp_8php_source.html#l00310">SharedMemoryOp.php:310</a></div></div>
<div class="ttc" id="classMessageMedia_1_1shmop_1_1Packing_html_ac7c99c2eda331bf98d13d1d7f62f087e"><div class="ttname"><a href="classMessageMedia_1_1shmop_1_1Packing.html#ac7c99c2eda331bf98d13d1d7f62f087e">MessageMedia\shmop\Packing\getTypeLength</a></div><div class="ttdeci">static getTypeLength($type)</div><div class="ttdoc">Gets the length of a value when packed into a binary string using the pack() function. </div><div class="ttdef"><b>Definition:</b> <a href="Packing_8php_source.html#l00055">Packing.php:55</a></div></div>
<div class="ttc" id="classMessageMedia_1_1shmop_1_1metrics_1_1MetricsLogger_html_a097a75f521240b42a4ae01854ea964bd"><div class="ttname"><a href="classMessageMedia_1_1shmop_1_1metrics_1_1MetricsLogger.html#a097a75f521240b42a4ae01854ea964bd">MessageMedia\shmop\metrics\MetricsLogger\findValue</a></div><div class="ttdeci">findValue($name)</div><div class="ttdoc">Attempts to find a value in the index shared memory segment to get its offset in the data shared memo...</div><div class="ttdef"><b>Definition:</b> <a href="MetricsLogger_8php_source.html#l00428">MetricsLogger.php:428</a></div></div>
<div class="ttc" id="classMessageMedia_1_1shmop_1_1Packing_html_aa11ea1d5fd1a95de3f1b330bc63a46c9"><div class="ttname"><a href="classMessageMedia_1_1shmop_1_1Packing.html#aa11ea1d5fd1a95de3f1b330bc63a46c9">MessageMedia\shmop\Packing\getPackLength</a></div><div class="ttdeci">static getPackLength($structure)</div><div class="ttdoc">Gets the length of a set of data when packed using pack with a format specified by $structure...</div><div class="ttdef"><b>Definition:</b> <a href="Packing_8php_source.html#l00087">Packing.php:87</a></div></div>
<div class="ttc" id="classMessageMedia_1_1shmop_1_1Packing_html_aab0e87eae6338b78df993269046a5f70"><div class="ttname"><a href="classMessageMedia_1_1shmop_1_1Packing.html#aab0e87eae6338b78df993269046a5f70">MessageMedia\shmop\Packing\getPackFormat</a></div><div class="ttdeci">static getPackFormat($id, $structure, $named=false)</div><div class="ttdoc">Create a pack format based on a structure for packing or unpacking. </div><div class="ttdef"><b>Definition:</b> <a href="Packing_8php_source.html#l00117">Packing.php:117</a></div></div>
<div class="ttc" id="classMessageMedia_1_1shmop_1_1SharedMemoryOp_html_ada1bd3c706e07ad3cfb58d1177065017"><div class="ttname"><a href="classMessageMedia_1_1shmop_1_1SharedMemoryOp.html#ada1bd3c706e07ad3cfb58d1177065017">MessageMedia\shmop\SharedMemoryOp\getLock</a></div><div class="ttdeci">getLock(&amp;$fp, $lock, $timeout=self::LOCK_WAIT_TIMEOUT)</div><div class="ttdoc">Attempts to get a lock on the file handle $fp within the specified timeout, specified by $timeout...</div><div class="ttdef"><b>Definition:</b> <a href="SharedMemoryOp_8php_source.html#l00398">SharedMemoryOp.php:398</a></div></div>
<div class="ttc" id="classMessageMedia_1_1shmop_1_1SharedMemoryOp_html_af46b1a831190aed3fb5fc372de55b56f"><div class="ttname"><a href="classMessageMedia_1_1shmop_1_1SharedMemoryOp.html#af46b1a831190aed3fb5fc372de55b56f">MessageMedia\shmop\SharedMemoryOp\$name</a></div><div class="ttdeci">$name</div><div class="ttdoc">Name for the shared memory segment. </div><div class="ttdef"><b>Definition:</b> <a href="SharedMemoryOp_8php_source.html#l00122">SharedMemoryOp.php:122</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a097a75f521240b42a4ae01854ea964bd"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">MessageMedia\shmop\metrics\MetricsLogger::findValue </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$name</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Attempts to find a value in the index shared memory segment to get its offset in the data shared memory segment. </p>
<p>This function should only be used if a lock has been obtained on the IPC key file. Using findValueWith lock provides this functionality.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">$name</td><td>Name of value to find in the index shared memory segment.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True if value found, false otherwise. </dd></dl>

<p>Definition at line <a class="el" href="MetricsLogger_8php_source.html#l00428">428</a> of file <a class="el" href="MetricsLogger_8php_source.html">MetricsLogger.php</a>.</p>
<div class="fragment"><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;    {</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;        $cluster  = $this-&gt;metrics[<a class="code" href="classMessageMedia_1_1shmop_1_1SharedMemoryOp.html#af46b1a831190aed3fb5fc372de55b56f">$name</a>][<span class="stringliteral">&#39;pcp_cluster&#39;</span>];</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;        $item     = $this-&gt;metrics[<a class="code" href="classMessageMedia_1_1shmop_1_1SharedMemoryOp.html#af46b1a831190aed3fb5fc372de55b56f">$name</a>][<span class="stringliteral">&#39;pcp_item&#39;</span>];</div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;        $instance = $this-&gt;metrics[<a class="code" href="classMessageMedia_1_1shmop_1_1SharedMemoryOp.html#af46b1a831190aed3fb5fc372de55b56f">$name</a>][<span class="stringliteral">&#39;pcp_instance&#39;</span>];</div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;        $head = $this-&gt;<a class="code" href="classMessageMedia_1_1shmop_1_1SharedMemoryOp.html#a495801c80c6c22770b1cfba0345cc1b9">getHead</a>();</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;        $startIndexOffset = <a class="code" href="classMessageMedia_1_1shmop_1_1Packing.html#aa11ea1d5fd1a95de3f1b330bc63a46c9">Packing::getPackLength</a>($this-&gt;<a class="code" href="classMessageMedia_1_1shmop_1_1SharedMemoryOp.html#a99d4030b744dba40e4e857125a30ba6f">getHeadStructure</a>()); <span class="comment">// Indexes are after the head structure.</span></div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;        $endIndexOffset = $head[<span class="stringliteral">&#39;nextIndexOffset&#39;</span>]; <span class="comment">// nextIndexOffset gives the tail, just past the final index item.</span></div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;        $indexStructureLength = <a class="code" href="classMessageMedia_1_1shmop_1_1Packing.html#aa11ea1d5fd1a95de3f1b330bc63a46c9">Packing::getPackLength</a>($this-&gt;indexStructure);</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;        <span class="keywordflow">for</span> ($indexOffset = $startIndexOffset; $indexOffset &lt; $endIndexOffset; $indexOffset += $indexStructureLength) {</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;            $data = unpack(</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;                <a class="code" href="classMessageMedia_1_1shmop_1_1Packing.html#aab0e87eae6338b78df993269046a5f70">Packing::getPackFormat</a>(<span class="stringliteral">&#39;index&#39;</span>, $this-&gt;indexStructure, <span class="keyword">true</span>),</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;                shmop_read($this-&gt;shmIndexId, $indexOffset, $indexStructureLength)</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;            );</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;            <span class="keywordflow">if</span> (($data[<span class="stringliteral">&#39;cluster&#39;</span>] == $cluster) &amp;&amp; ($data[<span class="stringliteral">&#39;item&#39;</span>] == $item) &amp;&amp; ($data[<span class="stringliteral">&#39;instance&#39;</span>] == $instance)) {</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;                $this-&gt;indexData[<a class="code" href="classMessageMedia_1_1shmop_1_1SharedMemoryOp.html#af46b1a831190aed3fb5fc372de55b56f">$name</a>][<span class="stringliteral">&#39;offset&#39;</span>] = $data[<span class="stringliteral">&#39;offset&#39;</span>];</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;            }</div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;        }</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;    }</div><div class="ttc" id="classMessageMedia_1_1shmop_1_1SharedMemoryOp_html_a495801c80c6c22770b1cfba0345cc1b9"><div class="ttname"><a href="classMessageMedia_1_1shmop_1_1SharedMemoryOp.html#a495801c80c6c22770b1cfba0345cc1b9">MessageMedia\shmop\SharedMemoryOp\getHead</a></div><div class="ttdeci">getHead()</div><div class="ttdoc">Helper function for getting the head data (version, nextIndexOffset, nextDataOffset) from the index s...</div><div class="ttdef"><b>Definition:</b> <a href="SharedMemoryOp_8php_source.html#l00310">SharedMemoryOp.php:310</a></div></div>
<div class="ttc" id="classMessageMedia_1_1shmop_1_1Packing_html_aa11ea1d5fd1a95de3f1b330bc63a46c9"><div class="ttname"><a href="classMessageMedia_1_1shmop_1_1Packing.html#aa11ea1d5fd1a95de3f1b330bc63a46c9">MessageMedia\shmop\Packing\getPackLength</a></div><div class="ttdeci">static getPackLength($structure)</div><div class="ttdoc">Gets the length of a set of data when packed using pack with a format specified by $structure...</div><div class="ttdef"><b>Definition:</b> <a href="Packing_8php_source.html#l00087">Packing.php:87</a></div></div>
<div class="ttc" id="classMessageMedia_1_1shmop_1_1Packing_html_aab0e87eae6338b78df993269046a5f70"><div class="ttname"><a href="classMessageMedia_1_1shmop_1_1Packing.html#aab0e87eae6338b78df993269046a5f70">MessageMedia\shmop\Packing\getPackFormat</a></div><div class="ttdeci">static getPackFormat($id, $structure, $named=false)</div><div class="ttdoc">Create a pack format based on a structure for packing or unpacking. </div><div class="ttdef"><b>Definition:</b> <a href="Packing_8php_source.html#l00117">Packing.php:117</a></div></div>
<div class="ttc" id="classMessageMedia_1_1shmop_1_1SharedMemoryOp_html_a99d4030b744dba40e4e857125a30ba6f"><div class="ttname"><a href="classMessageMedia_1_1shmop_1_1SharedMemoryOp.html#a99d4030b744dba40e4e857125a30ba6f">MessageMedia\shmop\SharedMemoryOp\getHeadStructure</a></div><div class="ttdeci">getHeadStructure()</div><div class="ttdoc">Returns the head structure of the index. </div><div class="ttdef"><b>Definition:</b> <a href="SharedMemoryOp_8php_source.html#l00321">SharedMemoryOp.php:321</a></div></div>
<div class="ttc" id="classMessageMedia_1_1shmop_1_1SharedMemoryOp_html_af46b1a831190aed3fb5fc372de55b56f"><div class="ttname"><a href="classMessageMedia_1_1shmop_1_1SharedMemoryOp.html#af46b1a831190aed3fb5fc372de55b56f">MessageMedia\shmop\SharedMemoryOp\$name</a></div><div class="ttdeci">$name</div><div class="ttdoc">Name for the shared memory segment. </div><div class="ttdef"><b>Definition:</b> <a href="SharedMemoryOp_8php_source.html#l00122">SharedMemoryOp.php:122</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="afeab7a3adee38501da25c54125d22d32"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">MessageMedia\shmop\metrics\MetricsLogger::findValueWithLock </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$name</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Wraps <a class="el" href="classMessageMedia_1_1shmop_1_1metrics_1_1MetricsLogger.html#a097a75f521240b42a4ae01854ea964bd" title="Attempts to find a value in the index shared memory segment to get its offset in the data shared memo...">findValue()</a> function with shared locking. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">$name</td><td>Name of value to find in the index shared memory segment.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True if value found, false otherwise. </dd></dl>

<p>Definition at line <a class="el" href="MetricsLogger_8php_source.html#l00387">387</a> of file <a class="el" href="MetricsLogger_8php_source.html">MetricsLogger.php</a>.</p>
<div class="fragment"><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;    {</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;        <span class="keywordflow">if</span> (!isset($this-&gt;metrics[<a class="code" href="classMessageMedia_1_1shmop_1_1SharedMemoryOp.html#af46b1a831190aed3fb5fc372de55b56f">$name</a>])) {</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;            $this-&gt;logger-&gt;warning(<span class="stringliteral">&#39;Attempted to find undefined metric &#39;</span> . $name);</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;        }</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;        $fp = fopen($this-&gt;ipcKeyFile, <span class="charliteral">&#39;r&#39;</span>);</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;        <span class="keywordflow">if</span> ($fp !== <span class="keyword">false</span>) {</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;            <span class="keywordflow">try</span> {</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;                <span class="keywordflow">if</span> ($this-&gt;<a class="code" href="classMessageMedia_1_1shmop_1_1SharedMemoryOp.html#ada1bd3c706e07ad3cfb58d1177065017">getLock</a>($fp, LOCK_SH)) {</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;                    $valueFound = $this-&gt;<a class="code" href="classMessageMedia_1_1shmop_1_1metrics_1_1MetricsLogger.html#a097a75f521240b42a4ae01854ea964bd">findValue</a>($name);</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;                    flock($fp, LOCK_UN);</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;                    fclose($fp);</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;                    <span class="keywordflow">return</span> $valueFound;</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;                } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;                    $this-&gt;logger-&gt;error(<span class="stringliteral">&#39;Failed to obtain a lock on &#39;</span> . $this-&gt;ipcKeyFile);</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;                }</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;            } <span class="keywordflow">catch</span> (Exception $e) {</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;                <span class="comment">// Let any exceptions fall through, unlock and close the file</span></div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;                $this-&gt;logger-&gt;error($e-&gt;getMessage());</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;            }</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;            flock($fp, LOCK_UN);</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;            fclose($fp);</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;            $this-&gt;logger-&gt;error(<span class="stringliteral">&#39;Failed to open &#39;</span> . $this-&gt;ipcKeyFile);</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;        }</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;    }</div><div class="ttc" id="classMessageMedia_1_1shmop_1_1metrics_1_1MetricsLogger_html_a097a75f521240b42a4ae01854ea964bd"><div class="ttname"><a href="classMessageMedia_1_1shmop_1_1metrics_1_1MetricsLogger.html#a097a75f521240b42a4ae01854ea964bd">MessageMedia\shmop\metrics\MetricsLogger\findValue</a></div><div class="ttdeci">findValue($name)</div><div class="ttdoc">Attempts to find a value in the index shared memory segment to get its offset in the data shared memo...</div><div class="ttdef"><b>Definition:</b> <a href="MetricsLogger_8php_source.html#l00428">MetricsLogger.php:428</a></div></div>
<div class="ttc" id="classMessageMedia_1_1shmop_1_1SharedMemoryOp_html_ada1bd3c706e07ad3cfb58d1177065017"><div class="ttname"><a href="classMessageMedia_1_1shmop_1_1SharedMemoryOp.html#ada1bd3c706e07ad3cfb58d1177065017">MessageMedia\shmop\SharedMemoryOp\getLock</a></div><div class="ttdeci">getLock(&amp;$fp, $lock, $timeout=self::LOCK_WAIT_TIMEOUT)</div><div class="ttdoc">Attempts to get a lock on the file handle $fp within the specified timeout, specified by $timeout...</div><div class="ttdef"><b>Definition:</b> <a href="SharedMemoryOp_8php_source.html#l00398">SharedMemoryOp.php:398</a></div></div>
<div class="ttc" id="classMessageMedia_1_1shmop_1_1SharedMemoryOp_html_af46b1a831190aed3fb5fc372de55b56f"><div class="ttname"><a href="classMessageMedia_1_1shmop_1_1SharedMemoryOp.html#af46b1a831190aed3fb5fc372de55b56f">MessageMedia\shmop\SharedMemoryOp\$name</a></div><div class="ttdeci">$name</div><div class="ttdoc">Name for the shared memory segment. </div><div class="ttdef"><b>Definition:</b> <a href="SharedMemoryOp_8php_source.html#l00122">SharedMemoryOp.php:122</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a42efd1fbcac663ca12d1cc2f0f9121ae"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MessageMedia\shmop\metrics\MetricsLogger::get </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$key</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get a value for a key. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">$key</td><td>Key to get.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Value for key. </dd></dl>

<p>Definition at line <a class="el" href="MetricsLogger_8php_source.html#l00708">708</a> of file <a class="el" href="MetricsLogger_8php_source.html">MetricsLogger.php</a>.</p>
<div class="fragment"><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;    {</div><div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;        <span class="keywordflow">return</span> $this-&gt;<a class="code" href="classMessageMedia_1_1shmop_1_1metrics_1_1MetricsLogger.html#aa4ee5a223f35c7d36093753f6aac1297">__get</a>($key);</div><div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;    }</div><div class="ttc" id="classMessageMedia_1_1shmop_1_1metrics_1_1MetricsLogger_html_aa4ee5a223f35c7d36093753f6aac1297"><div class="ttname"><a href="classMessageMedia_1_1shmop_1_1metrics_1_1MetricsLogger.html#aa4ee5a223f35c7d36093753f6aac1297">MessageMedia\shmop\metrics\MetricsLogger\__get</a></div><div class="ttdeci">__get($name)</div><div class="ttdoc">Override of the __get function. </div><div class="ttdef"><b>Definition:</b> <a href="MetricsLogger_8php_source.html#l00609">MetricsLogger.php:609</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a35b29d232a618552aaf33d6936682901"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MessageMedia\shmop\metrics\MetricsLogger::getAllMetrics </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Gets all metrics. </p>
<dl class="section return"><dt>Returns</dt><dd>Associative array of all metrics, or false on error. </dd></dl>

<p>Definition at line <a class="el" href="MetricsLogger_8php_source.html#l00762">762</a> of file <a class="el" href="MetricsLogger_8php_source.html">MetricsLogger.php</a>.</p>
<div class="fragment"><div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;    {</div><div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;        <a class="code" href="classMessageMedia_1_1shmop_1_1metrics_1_1MetricsLogger.html#a9ad2f979815bee215544cf739b5f80c1">$metrics</a> = array();</div><div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;        <span class="keywordflow">foreach</span> ($this-&gt;metrics as $metric =&gt; $id) {</div><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;            <a class="code" href="classMessageMedia_1_1shmop_1_1metrics_1_1MetricsLogger.html#a9ad2f979815bee215544cf739b5f80c1">$metrics</a>[$metric] = $this-&gt;$metric;</div><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;        }</div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classMessageMedia_1_1shmop_1_1metrics_1_1MetricsLogger.html#a9ad2f979815bee215544cf739b5f80c1">$metrics</a>;</div><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;    }</div><div class="ttc" id="classMessageMedia_1_1shmop_1_1metrics_1_1MetricsLogger_html_a9ad2f979815bee215544cf739b5f80c1"><div class="ttname"><a href="classMessageMedia_1_1shmop_1_1metrics_1_1MetricsLogger.html#a9ad2f979815bee215544cf739b5f80c1">MessageMedia\shmop\metrics\MetricsLogger\$metrics</a></div><div class="ttdeci">$metrics</div><div class="ttdoc">Array of metrics to be captured by this class. </div><div class="ttdef"><b>Definition:</b> <a href="MetricsLogger_8php_source.html#l00179">MetricsLogger.php:179</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ad26bb7d5b5607282fe26936da07b1fce"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MessageMedia\shmop\metrics\MetricsLogger::getMetrics </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Getter for the metrics map. </p>
<dl class="section return"><dt>Returns</dt><dd>Associative array of metric keys and IDs </dd></dl>

<p>Definition at line <a class="el" href="MetricsLogger_8php_source.html#l00786">786</a> of file <a class="el" href="MetricsLogger_8php_source.html">MetricsLogger.php</a>.</p>
<div class="fragment"><div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;    {</div><div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classMessageMedia_1_1shmop_1_1metrics_1_1MetricsLogger.html#a9ad2f979815bee215544cf739b5f80c1">$this-&gt;metrics</a>;</div><div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;    }</div><div class="ttc" id="classMessageMedia_1_1shmop_1_1metrics_1_1MetricsLogger_html_a9ad2f979815bee215544cf739b5f80c1"><div class="ttname"><a href="classMessageMedia_1_1shmop_1_1metrics_1_1MetricsLogger.html#a9ad2f979815bee215544cf739b5f80c1">MessageMedia\shmop\metrics\MetricsLogger\$metrics</a></div><div class="ttdeci">$metrics</div><div class="ttdoc">Array of metrics to be captured by this class. </div><div class="ttdef"><b>Definition:</b> <a href="MetricsLogger_8php_source.html#l00179">MetricsLogger.php:179</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aac67636f698dc44d48ffd21121198383"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MessageMedia\shmop\metrics\MetricsLogger::increment </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$value</em> = <code>1</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Increment a counter value in shared memory segment. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">$key</td><td>Key to increment. </td></tr>
    <tr><td class="paramname">$value</td><td>Value to increment by, defaults to 1. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="MetricsLogger_8php_source.html#l00685">685</a> of file <a class="el" href="MetricsLogger_8php_source.html">MetricsLogger.php</a>.</p>
<div class="fragment"><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;    {</div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;        $this-&gt;<a class="code" href="classMessageMedia_1_1shmop_1_1metrics_1_1MetricsLogger.html#a40a960f45e99dc8d28b5b85a74d43607">__set</a>($key, $this-&gt;<a class="code" href="classMessageMedia_1_1shmop_1_1metrics_1_1MetricsLogger.html#aa4ee5a223f35c7d36093753f6aac1297">__get</a>($key) + $value);</div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;    }</div><div class="ttc" id="classMessageMedia_1_1shmop_1_1metrics_1_1MetricsLogger_html_aa4ee5a223f35c7d36093753f6aac1297"><div class="ttname"><a href="classMessageMedia_1_1shmop_1_1metrics_1_1MetricsLogger.html#aa4ee5a223f35c7d36093753f6aac1297">MessageMedia\shmop\metrics\MetricsLogger\__get</a></div><div class="ttdeci">__get($name)</div><div class="ttdoc">Override of the __get function. </div><div class="ttdef"><b>Definition:</b> <a href="MetricsLogger_8php_source.html#l00609">MetricsLogger.php:609</a></div></div>
<div class="ttc" id="classMessageMedia_1_1shmop_1_1metrics_1_1MetricsLogger_html_a40a960f45e99dc8d28b5b85a74d43607"><div class="ttname"><a href="classMessageMedia_1_1shmop_1_1metrics_1_1MetricsLogger.html#a40a960f45e99dc8d28b5b85a74d43607">MessageMedia\shmop\metrics\MetricsLogger\__set</a></div><div class="ttdeci">__set($name, $value)</div><div class="ttdoc">Override of the __set function. </div><div class="ttdef"><b>Definition:</b> <a href="MetricsLogger_8php_source.html#l00653">MetricsLogger.php:653</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ad904fba925f73aa2f277278016f5c77c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">MessageMedia\shmop\metrics\MetricsLogger::parseMetrics </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$metrics</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Creates a key to ID map of all metrics. </p>
<p>The returned map will contain all metrics that this metrics logged can keep track of. Map keys will be the name of the metric, map values will be and associative array containting flags, type, pcp_cluster, pcp_item and pcp_instance.</p>
<p>If development mode is enabled, this function will validate all metrics and warn on duplicate metrics.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">$metrics</td><td>Array of metric configurations.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Associative array of metrics to IDs. </dd></dl>
<p>&lt; Used to check for duplicate PCP IDs. </p>

<p>Definition at line <a class="el" href="MetricsLogger_8php_source.html#l00259">259</a> of file <a class="el" href="MetricsLogger_8php_source.html">MetricsLogger.php</a>.</p>
<div class="fragment"><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;    {</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;        $parsedMetrics = array();</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;        <span class="keywordflow">if</span> ($this-&gt;developmentMode) {</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;            $pcpHashes = array(); <span class="comment">///&lt; Used to check for duplicate PCP IDs.</span></div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;<span class="comment"></span>        }</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;        <span class="keywordflow">foreach</span> (<a class="code" href="classMessageMedia_1_1shmop_1_1metrics_1_1MetricsLogger.html#a9ad2f979815bee215544cf739b5f80c1">$metrics</a> as $index =&gt; $config) {</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;            <span class="keywordflow">if</span> ($this-&gt;developmentMode) {</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;                $this-&gt;<a class="code" href="classMessageMedia_1_1shmop_1_1metrics_1_1MetricsLogger.html#a793d4d7925bffdc71fc70e137fe4ff78">validateMetricConfig</a>($index, $config, $pcpHashes);</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;            }</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;            <span class="keywordflow">if</span> ($config[<span class="stringliteral">&#39;type&#39;</span>] == self::METRIC_TYPE_COUNTER) {</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;                $keyName = $config[<span class="stringliteral">&#39;name&#39;</span>];</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;                <span class="keywordflow">if</span> ($this-&gt;developmentMode &amp;&amp; isset($parsedMetrics[$keyName])) {</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;                    $this-&gt;logger-&gt;warning(<span class="stringliteral">&#39;Duplicate key name for &#39;</span> . $keyName);</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;                }</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;                $parsedMetrics[$keyName] = array(</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;                    <span class="stringliteral">&#39;flags&#39;</span>        =&gt; 0,</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;                    <span class="stringliteral">&#39;type&#39;</span>         =&gt; <a class="code" href="classMessageMedia_1_1shmop_1_1Packing.html#ad23da1bd65407f7c02dad9d2de818228">Packing::UINT32</a>,</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;                    <span class="stringliteral">&#39;pcp_cluster&#39;</span>  =&gt; $config[<span class="stringliteral">&#39;pcp_cluster&#39;</span>],</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;                    <span class="stringliteral">&#39;pcp_item&#39;</span>     =&gt; $config[<span class="stringliteral">&#39;pcp_item&#39;</span>],</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;                    <span class="stringliteral">&#39;pcp_instance&#39;</span> =&gt; $config[<span class="stringliteral">&#39;pcp_instance&#39;</span>],</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;                );</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;            } elseif ($config[<span class="stringliteral">&#39;type&#39;</span>] == self::METRIC_TYPE_TIMER) {</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;                <span class="keywordflow">foreach</span> ($this-&gt;timingMetrics as $metric =&gt; $type) {</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;                    $keyName = $config[<span class="stringliteral">&#39;name&#39;</span>] . <span class="charliteral">&#39;.&#39;</span> . $metric;</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;                    <span class="keywordflow">if</span> ($this-&gt;developmentMode &amp;&amp; isset($parsedMetrics[$keyName])) {</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;                        $this-&gt;logger-&gt;warning(<span class="stringliteral">&#39;Duplicate key name for &#39;</span> . $keyName);</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;                    }</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;                    $parsedMetrics[$keyName] = array(</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;                        <span class="stringliteral">&#39;flags&#39;</span>        =&gt; 0,</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;                        <span class="stringliteral">&#39;type&#39;</span>         =&gt; $type,</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;                        <span class="stringliteral">&#39;pcp_cluster&#39;</span>  =&gt; $config[<span class="stringliteral">&#39;pcp_cluster&#39;</span>],</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;                        <span class="stringliteral">&#39;pcp_item&#39;</span>     =&gt; $config[<span class="stringliteral">&#39;pcp_item&#39;</span>],</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;                        <span class="stringliteral">&#39;pcp_instance&#39;</span> =&gt; $config[<span class="stringliteral">&#39;pcp_instance&#39;</span>],</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;                    );</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;                    $config[<span class="stringliteral">&#39;pcp_item&#39;</span>]++;</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;                }</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;            }</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;        }</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;        <span class="keywordflow">return</span> $parsedMetrics;</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;    }</div><div class="ttc" id="classMessageMedia_1_1shmop_1_1metrics_1_1MetricsLogger_html_a9ad2f979815bee215544cf739b5f80c1"><div class="ttname"><a href="classMessageMedia_1_1shmop_1_1metrics_1_1MetricsLogger.html#a9ad2f979815bee215544cf739b5f80c1">MessageMedia\shmop\metrics\MetricsLogger\$metrics</a></div><div class="ttdeci">$metrics</div><div class="ttdoc">Array of metrics to be captured by this class. </div><div class="ttdef"><b>Definition:</b> <a href="MetricsLogger_8php_source.html#l00179">MetricsLogger.php:179</a></div></div>
<div class="ttc" id="classMessageMedia_1_1shmop_1_1metrics_1_1MetricsLogger_html_a793d4d7925bffdc71fc70e137fe4ff78"><div class="ttname"><a href="classMessageMedia_1_1shmop_1_1metrics_1_1MetricsLogger.html#a793d4d7925bffdc71fc70e137fe4ff78">MessageMedia\shmop\metrics\MetricsLogger\validateMetricConfig</a></div><div class="ttdeci">validateMetricConfig($index, $config, &amp;$pcpHashes)</div><div class="ttdoc">Validation configuration for metrics. </div><div class="ttdef"><b>Definition:</b> <a href="MetricsLogger_8php_source.html#l00326">MetricsLogger.php:326</a></div></div>
<div class="ttc" id="classMessageMedia_1_1shmop_1_1Packing_html_ad23da1bd65407f7c02dad9d2de818228"><div class="ttname"><a href="classMessageMedia_1_1shmop_1_1Packing.html#ad23da1bd65407f7c02dad9d2de818228">MessageMedia\shmop\Packing\UINT32</a></div><div class="ttdeci">const UINT32</div><div class="ttdoc">unsigned long (always 32 bit, machine byte order) </div><div class="ttdef"><b>Definition:</b> <a href="Packing_8php_source.html#l00036">Packing.php:36</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aaee0bc6b4b3403234b2632ba7e0b3beb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MessageMedia\shmop\metrics\MetricsLogger::set </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set a value for a key. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">$key</td><td>Key to set. </td></tr>
    <tr><td class="paramname">$value</td><td>Value to set. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="MetricsLogger_8php_source.html#l00696">696</a> of file <a class="el" href="MetricsLogger_8php_source.html">MetricsLogger.php</a>.</p>
<div class="fragment"><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;    {</div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;        $this-&gt;<a class="code" href="classMessageMedia_1_1shmop_1_1metrics_1_1MetricsLogger.html#a40a960f45e99dc8d28b5b85a74d43607">__set</a>($key, $value);</div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;    }</div><div class="ttc" id="classMessageMedia_1_1shmop_1_1metrics_1_1MetricsLogger_html_a40a960f45e99dc8d28b5b85a74d43607"><div class="ttname"><a href="classMessageMedia_1_1shmop_1_1metrics_1_1MetricsLogger.html#a40a960f45e99dc8d28b5b85a74d43607">MessageMedia\shmop\metrics\MetricsLogger\__set</a></div><div class="ttdeci">__set($name, $value)</div><div class="ttdoc">Override of the __set function. </div><div class="ttdef"><b>Definition:</b> <a href="MetricsLogger_8php_source.html#l00653">MetricsLogger.php:653</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aa849f87eb95ec9a012a6828ed9a46878"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MessageMedia\shmop\metrics\MetricsLogger::timing </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$timeTaken</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Capture timing details of an event for a key. </p>
<p>This function will update a number of metrics including:</p><ul>
<li>service_time, an aggregate of the total time recorded for this key.</li>
<li>responses_times_n, a histogram bin (0 - 5) counting response times <dl class="section see"><dt>See also</dt><dd>: <a class="el" href="classMessageMedia_1_1shmop_1_1metrics_1_1MetricsLogger.html#a05fbd0863299422a4f75f934e90c9665" title="Array or timing metrics to collect. ">$timingMetrics</a>.</dd></dl>
</li>
<li>count, the number of times this key has been recorded.</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">$key</td><td>Key to update metrics for </td></tr>
    <tr><td class="paramname">$timeTaken</td><td>Duration for the event in milliseconds </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="MetricsLogger_8php_source.html#l00725">725</a> of file <a class="el" href="MetricsLogger_8php_source.html">MetricsLogger.php</a>.</p>
<div class="fragment"><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;    {</div><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;        <span class="keywordflow">if</span> ($this-&gt;readOnly) {</div><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;            $this-&gt;logger-&gt;error(<span class="stringliteral">&#39;Attempted to write in read only mode&#39;</span>);</div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;        }</div><div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;        <span class="keywordflow">if</span> ($this-&gt;hasError) {</div><div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;        }</div><div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;        $this-&gt;{$key . <span class="stringliteral">&#39;.service_time&#39;</span>} += $timeTaken;</div><div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;        <span class="keywordflow">switch</span> (<span class="keyword">true</span>) {</div><div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;            <span class="keywordflow">case</span> ($timeTaken &lt; 1000):                           <span class="comment">// Less than 1 second</span></div><div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;                $this-&gt;{$key . <span class="stringliteral">&#39;.time_taken_0&#39;</span>}++;</div><div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;                <span class="keywordflow">break</span>;</div><div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;            <span class="keywordflow">case</span> ($timeTaken &gt;= 1000 &amp;&amp; $timeTaken &lt; 5000):     <span class="comment">// Between 1 and 5 seconds</span></div><div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;                $this-&gt;{$key . <span class="stringliteral">&#39;.time_taken_1&#39;</span>}++;</div><div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;                <span class="keywordflow">break</span>;</div><div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;            <span class="keywordflow">case</span> ($timeTaken &gt;= 5000 &amp;&amp; $timeTaken &lt; 10000):    <span class="comment">// Between 5 and 10 seconds</span></div><div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;                $this-&gt;{$key . <span class="stringliteral">&#39;.time_taken_2&#39;</span>}++;</div><div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;                <span class="keywordflow">break</span>;</div><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;            <span class="keywordflow">case</span> ($timeTaken &gt;= 10000 &amp;&amp; $timeTaken &lt; 20000):   <span class="comment">// Between 10 and 20 seconds</span></div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;                $this-&gt;{$key . <span class="stringliteral">&#39;.time_taken_3&#39;</span>}++;</div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;                <span class="keywordflow">break</span>;</div><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;            <span class="keywordflow">case</span> ($timeTaken &gt;= 20000 &amp;&amp; $timeTaken &lt; 40000):   <span class="comment">// Between 20 and 40 seconds</span></div><div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;                $this-&gt;{$key . <span class="stringliteral">&#39;.time_taken_4&#39;</span>}++;</div><div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;                <span class="keywordflow">break</span>;</div><div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;            <span class="keywordflow">case</span> ($timeTaken &gt;= 40000):                         <span class="comment">// Greater than 40 seconds</span></div><div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;                $this-&gt;{$key . <span class="stringliteral">&#39;.time_taken_5&#39;</span>}++;</div><div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;                <span class="keywordflow">break</span>;</div><div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;        }</div><div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;        $this-&gt;{$key . <span class="stringliteral">&#39;.timings_count&#39;</span>}++;</div><div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;    }</div></div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a793d4d7925bffdc71fc70e137fe4ff78"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">MessageMedia\shmop\metrics\MetricsLogger::validateMetricConfig </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$config</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&amp;&#160;</td>
          <td class="paramname"><em>$pcpHashes</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Validation configuration for metrics. </p>
<p>Ensures metric configurations are valid. All metrics require a pcp_cluster value, used when creating an ID comprising of the pcp_cluster, pcp_item and pcp_instance.</p>
<p>Counter metrics require a valid name.</p>
<p>Non timer metrics require a pcp_item value, used when creating an ID comprising of the pcp_cluster, pcp_item and pcp_instance.</p>
<p>Metrics that don't have a pcp_item value will have this value initialized to 0, or to the pcp_start_item.</p>
<p>To minimise the performance impact this class has on code that uses it, this function is only used in development mode.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">$index</td><td>Index of the item, used for logging warnings. </td></tr>
    <tr><td class="paramname">$config</td><td>Associative array of config values. </td></tr>
    <tr><td class="paramname">$pcpHashes</td><td>Array of hash PCP metrics, used to identify duplicates, passed by reference.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True if valid, false otherwise. </dd></dl>

<p>Definition at line <a class="el" href="MetricsLogger_8php_source.html#l00326">326</a> of file <a class="el" href="MetricsLogger_8php_source.html">MetricsLogger.php</a>.</p>
<div class="fragment"><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;    {</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;        <span class="comment">// Metric must have a valid type</span></div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;        <span class="keywordflow">if</span> (!isset($config[<span class="stringliteral">&#39;type&#39;</span>]) || !in_array($config[<span class="stringliteral">&#39;type&#39;</span>], array(</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;            self::METRIC_TYPE_COUNTER,</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;            self::METRIC_TYPE_TIMER,</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;        ))) {</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;            $this-&gt;logger-&gt;warning(<span class="stringliteral">&#39;Missing or invalid type property, ignoring metric at index &#39;</span> . $index);</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;        }</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;        <span class="comment">// All metrics must have a name</span></div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;        <span class="keywordflow">if</span> (!isset($config[<span class="stringliteral">&#39;name&#39;</span>]) || !is_string($config[<span class="stringliteral">&#39;name&#39;</span>])) {</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;            $this-&gt;logger-&gt;warning(<span class="stringliteral">&#39;Missing name property, ignoring metric at index &#39;</span> . $index);</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;        }</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;        <span class="comment">// All metrics must have a pcp_cluster property</span></div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;        <span class="keywordflow">if</span> (!isset($config[<span class="stringliteral">&#39;pcp_cluster&#39;</span>]) || !is_int($config[<span class="stringliteral">&#39;pcp_cluster&#39;</span>])) {</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;            $this-&gt;logger-&gt;warning(<span class="stringliteral">&#39;Missing or invalid pcp_cluster property, ignoring metric at index &#39;</span> . $index);</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;        }</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;        <span class="keywordflow">if</span> ($config[<span class="stringliteral">&#39;type&#39;</span>] != self::METRIC_TYPE_TIMER) {</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;            <span class="comment">// Only timers don&#39;t require a pcp_item property</span></div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;            <span class="keywordflow">if</span> (!isset($config[<span class="stringliteral">&#39;pcp_item&#39;</span>]) || !is_int($config[<span class="stringliteral">&#39;pcp_item&#39;</span>])) {</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;                $this-&gt;logger-&gt;warning(<span class="stringliteral">&#39;Missing or invalid pcp_item property, ignoring metric at index &#39;</span> . $index);</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;            }</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;        }</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;        <span class="keywordflow">if</span> ($config[<span class="stringliteral">&#39;pcp_cluster&#39;</span>] &lt; 0 || $config[<span class="stringliteral">&#39;pcp_cluster&#39;</span>] &gt; 65535) { <span class="comment">// Max UINT16</span></div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;            $this-&gt;logger-&gt;warning(<span class="stringliteral">&#39;Out of range pcp_cluster property, ignoring metric at index &#39;</span> . $index);</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;        }</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;        <span class="keywordflow">if</span> ($config[<span class="stringliteral">&#39;pcp_item&#39;</span>] &lt; 0 || $config[<span class="stringliteral">&#39;pcp_item&#39;</span>] &gt; 65535) { <span class="comment">// Max UINT16</span></div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;            $this-&gt;logger-&gt;warning(<span class="stringliteral">&#39;Out of range pcp_item property, ignoring metric at index &#39;</span> . $index);</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;        }</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;        <span class="keywordflow">if</span> ($config[<span class="stringliteral">&#39;pcp_instance&#39;</span>] &lt; -2147483648 || $config[<span class="stringliteral">&#39;pcp_instance&#39;</span>] &gt; 2147483647) { <span class="comment">// Max INT32</span></div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;            $this-&gt;logger-&gt;warning(<span class="stringliteral">&#39;Out of range pcp_instance property, ignoring metric at index &#39;</span> . $index);</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;        }</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;        $pcpHash = md5($config[<span class="stringliteral">&#39;pcp_cluster&#39;</span>] . $config[<span class="stringliteral">&#39;pcp_item&#39;</span>] . $config[<span class="stringliteral">&#39;pcp_instance&#39;</span>]);</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;        <span class="keywordflow">if</span> (in_array($pcpHash, $pcpHashes)) {</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;            $this-&gt;logger-&gt;warning(<span class="stringliteral">&#39;Duplicate PCP ID, ignoring metric at index &#39;</span> . $index);</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;            $pcpHashes[] = $pcpHash;</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;        }</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;    }</div></div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a329f9bd2d413f17449f487bbb838b061"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">MessageMedia\shmop\metrics\MetricsLogger::validateValue </td>
          <td>(</td>
          <td class="paramtype">&amp;&#160;</td>
          <td class="paramname"><em>$value</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$name</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Validates a value against its type and modifies if necessary. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">$name</td><td>Name of the value to validate. </td></tr>
    <tr><td class="paramname">$value</td><td>The value to validate. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="MetricsLogger_8php_source.html#l00574">574</a> of file <a class="el" href="MetricsLogger_8php_source.html">MetricsLogger.php</a>.</p>
<div class="fragment"><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;    {</div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;        <span class="comment">// All metrics should be numeric.</span></div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;        <span class="keywordflow">if</span> (is_numeric($value)) {</div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;            <span class="comment">// Ensure integers don&#39;t exceed their limit and convert to doubles.</span></div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;            $maxUint32Value = min(PHP_INT_MAX, 4294967295); <span class="comment">// The former applies on 32-bit systems.</span></div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;            <span class="keywordflow">if</span> ($this-&gt;metrics[<a class="code" href="classMessageMedia_1_1shmop_1_1SharedMemoryOp.html#af46b1a831190aed3fb5fc372de55b56f">$name</a>][<span class="stringliteral">&#39;type&#39;</span>] == <a class="code" href="classMessageMedia_1_1shmop_1_1Packing.html#ad23da1bd65407f7c02dad9d2de818228">Packing::UINT32</a> &amp;&amp; ($value &gt;= $maxUint32Value || !is_int($value))) {</div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;                $this-&gt;logger-&gt;notice(<span class="stringliteral">&#39;Wrapping value for &#39;</span> . <a class="code" href="classMessageMedia_1_1shmop_1_1SharedMemoryOp.html#af46b1a831190aed3fb5fc372de55b56f">$name</a>);</div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;                $value = 0;</div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;            }</div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;            <span class="comment">// Ensure all metrics are positive numbers.</span></div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;            <span class="keywordflow">if</span> ($value &lt; 0) {</div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;                $this-&gt;logger-&gt;warning(<span class="stringliteral">&#39;Ignoring / resetting negative value &#39;</span> . $value . <span class="stringliteral">&#39; for &#39;</span> . <a class="code" href="classMessageMedia_1_1shmop_1_1SharedMemoryOp.html#af46b1a831190aed3fb5fc372de55b56f">$name</a>);</div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;                $value = 0;</div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;            }</div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;            $this-&gt;logger-&gt;warning(<span class="stringliteral">&#39;Ignoring / resetting non numeric value &#39;</span> . print_r($value, <span class="keyword">true</span>) . <span class="stringliteral">&#39; for &#39;</span> . <a class="code" href="classMessageMedia_1_1shmop_1_1SharedMemoryOp.html#af46b1a831190aed3fb5fc372de55b56f">$name</a>);</div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;            $value = 0;</div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;        }</div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;    }</div><div class="ttc" id="classMessageMedia_1_1shmop_1_1Packing_html_ad23da1bd65407f7c02dad9d2de818228"><div class="ttname"><a href="classMessageMedia_1_1shmop_1_1Packing.html#ad23da1bd65407f7c02dad9d2de818228">MessageMedia\shmop\Packing\UINT32</a></div><div class="ttdeci">const UINT32</div><div class="ttdoc">unsigned long (always 32 bit, machine byte order) </div><div class="ttdef"><b>Definition:</b> <a href="Packing_8php_source.html#l00036">Packing.php:36</a></div></div>
<div class="ttc" id="classMessageMedia_1_1shmop_1_1SharedMemoryOp_html_af46b1a831190aed3fb5fc372de55b56f"><div class="ttname"><a href="classMessageMedia_1_1shmop_1_1SharedMemoryOp.html#af46b1a831190aed3fb5fc372de55b56f">MessageMedia\shmop\SharedMemoryOp\$name</a></div><div class="ttdeci">$name</div><div class="ttdoc">Name for the shared memory segment. </div><div class="ttdef"><b>Definition:</b> <a href="SharedMemoryOp_8php_source.html#l00122">SharedMemoryOp.php:122</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a class="anchor" id="adcacfec014a42493ca02e5b834646998"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">MessageMedia\shmop\metrics\MetricsLogger::$indexStructure</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= array(</div><div class="line">        <span class="stringliteral">&#39;flags&#39;</span>    =&gt; <a class="code" href="classMessageMedia_1_1shmop_1_1Packing.html#a1b7156f274e0155508d7ccf1efb9d14b">Packing::UCHAR</a>,  </div><div class="line">        <span class="stringliteral">&#39;type&#39;</span>     =&gt; <a class="code" href="classMessageMedia_1_1shmop_1_1Packing.html#a1b7156f274e0155508d7ccf1efb9d14b">Packing::UCHAR</a>,  </div><div class="line">        <span class="stringliteral">&#39;length&#39;</span>   =&gt; <a class="code" href="classMessageMedia_1_1shmop_1_1Packing.html#abe096ab2d3f19c7287571600cdb00616">Packing::UINT16</a>, </div><div class="line">        <span class="stringliteral">&#39;offset&#39;</span>   =&gt; <a class="code" href="classMessageMedia_1_1shmop_1_1Packing.html#ad23da1bd65407f7c02dad9d2de818228">Packing::UINT32</a>, </div><div class="line">        <span class="stringliteral">&#39;cluster&#39;</span>  =&gt; <a class="code" href="classMessageMedia_1_1shmop_1_1Packing.html#abe096ab2d3f19c7287571600cdb00616">Packing::UINT16</a>, </div><div class="line">        <span class="stringliteral">&#39;item&#39;</span>     =&gt; <a class="code" href="classMessageMedia_1_1shmop_1_1Packing.html#abe096ab2d3f19c7287571600cdb00616">Packing::UINT16</a>, </div><div class="line">        <span class="stringliteral">&#39;instance&#39;</span> =&gt; <a class="code" href="classMessageMedia_1_1shmop_1_1Packing.html#a9f1e7e036dcc87a419f2cd904667c475">Packing::INT32</a>,  </div><div class="line">    )</div></div><!-- fragment --><p>Structure of the data info lists stored in the index segment. </p><dl class="section see"><dt>See also</dt><dd><a href="http://php.net/manual/en/function.pack.php">http://php.net/manual/en/function.pack.php</a>. </dd></dl>

<p>Definition at line <a class="el" href="MetricsLogger_8php_source.html#l00201">201</a> of file <a class="el" href="MetricsLogger_8php_source.html">MetricsLogger.php</a>.</p>

</div>
</div>
<a class="anchor" id="a05fbd0863299422a4f75f934e90c9665"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">MessageMedia\shmop\metrics\MetricsLogger::$timingMetrics</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= array(</div><div class="line">        <span class="stringliteral">&#39;service_time&#39;</span>  =&gt; <a class="code" href="classMessageMedia_1_1shmop_1_1Packing.html#ad23da1bd65407f7c02dad9d2de818228">Packing::UINT32</a>, </div><div class="line">        <span class="stringliteral">&#39;time_taken_0&#39;</span>  =&gt; <a class="code" href="classMessageMedia_1_1shmop_1_1Packing.html#ad23da1bd65407f7c02dad9d2de818228">Packing::UINT32</a>, </div><div class="line">        <span class="stringliteral">&#39;time_taken_1&#39;</span>  =&gt; <a class="code" href="classMessageMedia_1_1shmop_1_1Packing.html#ad23da1bd65407f7c02dad9d2de818228">Packing::UINT32</a>, </div><div class="line">        <span class="stringliteral">&#39;time_taken_2&#39;</span>  =&gt; <a class="code" href="classMessageMedia_1_1shmop_1_1Packing.html#ad23da1bd65407f7c02dad9d2de818228">Packing::UINT32</a>, </div><div class="line">        <span class="stringliteral">&#39;time_taken_3&#39;</span>  =&gt; <a class="code" href="classMessageMedia_1_1shmop_1_1Packing.html#ad23da1bd65407f7c02dad9d2de818228">Packing::UINT32</a>, </div><div class="line">        <span class="stringliteral">&#39;time_taken_4&#39;</span>  =&gt; <a class="code" href="classMessageMedia_1_1shmop_1_1Packing.html#ad23da1bd65407f7c02dad9d2de818228">Packing::UINT32</a>, </div><div class="line">        <span class="stringliteral">&#39;time_taken_5&#39;</span>  =&gt; <a class="code" href="classMessageMedia_1_1shmop_1_1Packing.html#ad23da1bd65407f7c02dad9d2de818228">Packing::UINT32</a>, </div><div class="line">        <span class="stringliteral">&#39;timings_count&#39;</span> =&gt; <a class="code" href="classMessageMedia_1_1shmop_1_1Packing.html#ad23da1bd65407f7c02dad9d2de818228">Packing::UINT32</a>, </div><div class="line">    )</div></div><!-- fragment -->
<p>Array or timing metrics to collect. </p>

<p>Definition at line <a class="el" href="MetricsLogger_8php_source.html#l00188">188</a> of file <a class="el" href="MetricsLogger_8php_source.html">MetricsLogger.php</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>src/metrics/<a class="el" href="MetricsLogger_8php_source.html">MetricsLogger.php</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><b>MessageMedia</b></li><li class="navelem"><b>shmop</b></li><li class="navelem"><b>metrics</b></li><li class="navelem"><a class="el" href="classMessageMedia_1_1shmop_1_1metrics_1_1MetricsLogger.html">MetricsLogger</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
